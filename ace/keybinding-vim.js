define("ace/keyboard/vim",["require","exports","module","ace/range","ace/lib/event_emitter","ace/lib/dom","ace/lib/oop","ace/lib/keys","ace/lib/event","ace/search","ace/lib/useragent","ace/search_highlight","ace/commands/multi_select_commands","ace/multi_select"],function(a,b){"use strict";function c(a){return{row:a.line,column:a.ch}}function d(a){return new sc(a.row,a.column)}function e(a){var b=a.keyCode;if(-1==tc.indexOf(b)){var c=a.ctrlKey||a.metaKey,d=pc.keyNames[b];d=uc[d]||d;var e="";if(a.ctrlKey&&(e+="C-"),a.altKey&&(e+="A-"),!(vc&&a.metaKey||!c&&a.shiftKey&&d.length<2))return a.shiftKey&&!/^[A-Za-z]$/.test(d)&&(e+="S-"),1==d.length&&(d=d.toLowerCase()),e+=d,e.length>1&&(e="<"+e+">"),e}}function f(a,b){var c=e(b);c&&(pc.signal(a,"vim-keypress",c),pc.Vim.handleKey(a,c,"user")&&pc.e_stop(b))}function g(a,b){var c=b.charCode||b.keyCode;if(!(b.ctrlKey||b.metaKey||b.altKey||b.shiftKey&&32>c)){var d=String.fromCharCode(c);pc.signal(a,"vim-keypress",d),pc.Vim.handleKey(a,d,"user")&&pc.e_stop(b)}}function h(a){a.setOption("disableInput",!0),a.setOption("showCursorWhenSelecting",!1),pc.signal(a,"vim-mode-change",{mode:"normal"}),a.on("cursorActivity",Xb),y(a),pc.on(a.getInputField(),"paste",l(a)),a.on("keypress",g),a.on("keydown",f)}function i(a){a.setOption("disableInput",!1),a.off("cursorActivity",Xb),pc.off(a.getInputField(),"paste",l(a)),a.state.vim=null,a.off("keypress",g),a.off("keydown",f)}function j(a,b){this==pc.keyMap.vim&&pc.rmClass(a.getWrapperElement(),"cm-fat-cursor"),b&&b.attach==k||i(a,!1)}function k(a,b){this==pc.keyMap.vim&&pc.addClass(a.getWrapperElement(),"cm-fat-cursor"),b&&b.attach==k||h(a)}function l(a){var b=a.state.vim;return b.onPasteFn||(b.onPasteFn=function(){b.insertMode||(a.setCursor(I(a.getCursor(),0,1)),Oc.enterInsertMode(a,{},b))}),b.onPasteFn}function m(a,b){for(var c=[],d=a;a+b>d;d++)c.push(String.fromCharCode(d));return c}function n(a,b){return b>=a.firstLine()&&b<=a.lastLine()}function o(a){return/^[a-z]$/.test(a)}function p(a){return-1!="()[]{}".indexOf(a)}function q(a){return xc.test(a)}function r(a){return/^[A-Z]$/.test(a)}function s(a){return/^\s*$/.test(a)}function t(a,b){for(var c=0;c<b.length;c++)if(b[c]==a)return!0;return!1}function u(a,b,c){if(void 0===b)throw Error("defaultValue is required");c||(c="string");var d=a;"string"==typeof a?d={type:c,defaultValue:b}:a=d.name,Fc[a]=d,v(a,b)}function v(a,b,c){var d=Fc[a];if(!d)throw Error("Unknown option: "+a);if("boolean"==d.type){if(b&&b!==!0)throw Error("Invalid argument: "+a+"="+b);b!==!1&&(b=!0)}d.value=b,d.set&&d.set(b,c)}function w(a){var b=Fc[a];if(!b)throw Error("Unknown option: "+a);return b.value}function x(){this.latestRegister=void 0,this.isPlaying=!1,this.isRecording=!1,this.replaySearchQueries=[],this.onRecordingDone=void 0,this.lastInsertModeChanges=Hc()}function y(a){return a.state.vim||(a.state.vim={inputState:new A,lastEditInputState:void 0,lastEditActionCommand:void 0,lastHPos:-1,lastHSPos:-1,lastMotion:null,marks:{},fakeCursor:null,insertMode:!1,insertModeRepeat:void 0,visualMode:!1,visualLine:!1,visualBlock:!1,lastSelection:null,lastPastedText:null,sel:{}}),a.state.vim}function z(){Ic={searchQuery:null,searchIsReversed:!1,lastSubstituteReplacePart:void 0,jumpList:Gc(),macroModeState:new x,lastChararacterSearch:{increment:0,forward:!0,selectedCharacter:""},registerController:new D({}),searchHistoryController:new E({}),exCommandHistoryController:new E({})};for(var a in Fc){var b=Fc[a];b.value=b.defaultValue}}function A(){this.prefixRepeat=[],this.motionRepeat=[],this.operator=null,this.operatorArgs=null,this.motion=null,this.motionArgs=null,this.keyBuffer=[],this.registerName=null}function B(a,b){a.state.vim.inputState=new A,pc.signal(a,"vim-command-done",b)}function C(a,b,c){this.clear(),this.keyBuffer=[a||""],this.insertModeChanges=[],this.searchQueries=[],this.linewise=!!b,this.blockwise=!!c}function D(a){this.registers=a,this.unnamedRegister=a['"']=new C,a["."]=new C,a[":"]=new C,a["/"]=new C}function E(){this.historyBuffer=[],this.iterator,this.initialPrefix=null}function F(a,b){for(var c=[],d=0;b>d;d++)c.push(a);return c}function G(a,b,c){var d=Math.min(Math.max(a.firstLine(),b.line),a.lastLine()),e=U(a,d)-1;e=c?e+1:e;var f=Math.min(Math.max(0,b.ch),e);return sc(d,f)}function H(a){var b={};for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b}function I(a,b,c){return"object"==typeof b&&(c=b.ch,b=b.line),sc(a.line+b,a.ch+c)}function J(a,b){return{line:b.line-a.line,ch:b.line-a.line}}function K(a,b,c,d){for(var e,f=[],g=[],h=0;h<b.length;h++){var i=b[h];"insert"==c&&"insert"!=i.context||i.context&&i.context!=c||d.operator&&"action"==i.type||!(e=L(a,i.keys))||("partial"==e&&f.push(i),"full"==e&&g.push(i))}return{partial:f.length&&f,full:g.length&&g}}function L(a,b){if("<character>"==b.slice(-11)){var c=b.length-11,d=a.slice(0,c),e=b.slice(0,c);return d==e&&a.length>c?"full":0==e.indexOf(d)?"partial":!1}return a==b?"full":0==b.indexOf(a)?"partial":!1}function M(a){var b=/^.*(<[\w\-]+>)$/.exec(a),c=b?b[1]:a.slice(-1);if(c.length>1)switch(c){case"<CR>":c="\n";break;case"<Space>":c=" "}return c}function N(a,b,c){return function(){for(var d=0;c>d;d++)b(a)}}function O(a){return sc(a.line,a.ch)}function P(a,b){return a.ch==b.ch&&a.line==b.line}function Q(a,b){return a.line<b.line?!0:a.line==b.line&&a.ch<b.ch?!0:!1}function R(a,b){return arguments.length>2&&(b=R.apply(void 0,Array.prototype.slice.call(arguments,1))),Q(a,b)?a:b}function S(a,b){return arguments.length>2&&(b=S.apply(void 0,Array.prototype.slice.call(arguments,1))),Q(a,b)?b:a}function T(a,b,c){var d=Q(a,b),e=Q(b,c);return d&&e}function U(a,b){return a.getLine(b).length}function V(a){return a.split("").reverse().join("")}function W(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}function X(a){return a.replace(/([.?*+$\[\]\/\\(){}|\-])/g,"\\$1")}function Y(a,b,c){var d=U(a,b),e=new Array(c-d+1).join(" ");a.setCursor(sc(b,d)),a.replaceRange(e,a.getCursor())}function Z(a,b){var c=[],d=a.listSelections(),e=O(a.clipPos(b)),f=!P(b,e),g=a.getCursor("head"),h=_(d,g),i=P(d[h].head,d[h].anchor),j=d.length-1,k=j-h>h?j:0,l=d[k].anchor,m=Math.min(l.line,e.line),n=Math.max(l.line,e.line),o=l.ch,p=e.ch,q=d[k].head.ch-o,r=p-o;q>0&&0>=r?(o++,f||p--):0>q&&r>=0?(o--,i||p++):0>q&&-1==r&&(o--,p++);for(var s=m;n>=s;s++){var t={anchor:new sc(s,o),head:new sc(s,p)};c.push(t)}return h=e.line==n?c.length-1:0,a.setSelections(c),b.ch=p,l.ch=o,l}function $(a,b,c){for(var d=[],e=0;c>e;e++){var f=I(b,e,0);d.push({anchor:f,head:f})}a.setSelections(d,0)}function _(a,b,c){for(var d=0;d<a.length;d++){var e="head"!=c&&P(a[d].anchor,b),f="anchor"!=c&&P(a[d].head,b);if(e||f)return d}return-1}function ab(a,b){var c=b.lastSelection,d=function(){var b=a.listSelections(),c=b[0],d=b[b.length-1],e=Q(c.anchor,c.head)?c.anchor:c.head,f=Q(d.anchor,d.head)?d.head:d.anchor;return[e,f]},e=function(){var b=a.getCursor(),d=a.getCursor(),e=c.visualBlock;if(e){var f=e.width,g=e.height;d=sc(b.line+g,b.ch+f);for(var h=[],i=b.line;i<d.line;i++){var j=sc(i,b.ch),k=sc(i,d.ch),l={anchor:j,head:k};h.push(l)}a.setSelections(h)}else{var m=c.anchorMark.find(),n=c.headMark.find(),o=n.line-m.line,p=n.ch-m.ch;d={line:d.line+o,ch:o?d.ch:p+d.ch},c.visualLine&&(b=sc(b.line,0),d=sc(d.line,U(a,d.line))),a.setSelection(b,d)}return[b,d]};return b.visualMode?d():e()}function bb(a,b){var c=b.sel.anchor,d=b.sel.head;b.lastPastedText&&(d=a.posFromIndex(a.indexFromPos(c)+b.lastPastedText.length),b.lastPastedText=null),b.lastSelection={anchorMark:a.setBookmark(c),headMark:a.setBookmark(d),anchor:O(c),head:O(d),visualMode:b.visualMode,visualLine:b.visualLine,visualBlock:b.visualBlock}}function cb(a,b,c){var d,e=a.state.vim.sel,f=e.head,g=e.anchor;return Q(c,b)&&(d=c,c=b,b=d),Q(f,g)?(f=R(b,f),g=S(g,c)):(g=R(b,g),f=S(f,c),f=I(f,0,-1),-1==f.ch&&f.line!=a.firstLine()&&(f=sc(f.line-1,U(a,f.line-1)))),[g,f]}function db(a,b,c){var d=a.state.vim;b=b||d.sel;var c=c||d.visualLine?"line":d.visualBlock?"block":"char",e=eb(a,b,c);a.setSelections(e.ranges,e.primary),Yb(a)}function eb(a,b,c,d){var e=O(b.head),f=O(b.anchor);if("char"==c){var g=d||Q(b.head,b.anchor)?0:1,h=Q(b.head,b.anchor)?1:0;return e=I(b.head,0,g),f=I(b.anchor,0,h),{ranges:[{anchor:f,head:e}],primary:0}}if("line"==c){if(Q(b.head,b.anchor))e.ch=0,f.ch=U(a,f.line);else{f.ch=0;var i=a.lastLine();e.line>i&&(e.line=i),e.ch=U(a,e.line)}return{ranges:[{anchor:f,head:e}],primary:0}}if("block"==c){for(var j=Math.min(f.line,e.line),k=Math.min(f.ch,e.ch),l=Math.max(f.line,e.line),m=Math.max(f.ch,e.ch)+1,n=l-j+1,o=e.line==j?0:n-1,p=[],q=0;n>q;q++)p.push({anchor:sc(j+q,k),head:sc(j+q,m)});return{ranges:p,primary:o}}}function fb(a){var b=a.getCursor("head");return 1==a.getSelection().length&&(b=R(b,a.getCursor("anchor"))),b}function gb(a,b){var c=a.state.vim;b!==!1&&a.setCursor(G(a,c.sel.head)),bb(a,c),c.visualMode=!1,c.visualLine=!1,c.visualBlock=!1,pc.signal(a,"vim-mode-change",{mode:"normal"}),c.fakeCursor&&c.fakeCursor.clear()}function hb(a,b,c){var d=a.getRange(b,c);if(/\n\s*$/.test(d)){var e=d.split("\n");e.pop();for(var f,f=e.pop();e.length>0&&f&&s(f);f=e.pop())c.line--,c.ch=0;f?(c.line--,c.ch=U(a,c.line)):c.ch=0}}function ib(a,b,c){b.ch=0,c.ch=0,c.line++}function jb(a){if(!a)return 0;var b=a.search(/\S/);return-1==b?a.length:b}function kb(a,b,c,d,e){var f,g=fb(a),h=a.getLine(g.line),i=g.ch,j=h.substring(i);if(f=j.search(e?/\w/:/\S/),-1==f)return null;i+=f,j=h.substring(i);var k,l=h.substring(0,i);k=d?/^\S+/:/\w/.test(h.charAt(i))?/^\w+/:/^[^\w\s]+/;var m=k.exec(j),n=i,o=i+m[0].length,p=V(l),q=k.exec(p);if(q&&(n-=q[0].length),b){var r=h.substring(o),s=r.match(/^\s*/)[0].length;if(s>0)o+=s;else{var t=p.length-n,u=p.substring(t),v=u.match(/^\s*/)[0].length;n-=v}}return{start:sc(g.line,n),end:sc(g.line,o)}}function lb(a,b,c){P(b,c)||Ic.jumpList.add(a,b,c)}function mb(a,b){Ic.lastChararacterSearch.increment=a,Ic.lastChararacterSearch.forward=b.forward,Ic.lastChararacterSearch.selectedCharacter=b.selectedCharacter}function nb(a,b,c,d){var e=O(a.getCursor()),f=c?1:-1,g=c?a.lineCount():-1,h=e.ch,i=e.line,j=a.getLine(i),k={lineText:j,nextCh:j.charAt(h),lastCh:null,index:h,symb:d,reverseSymb:(c?{")":"(","}":"{"}:{"(":")","{":"}"})[d],forward:c,depth:0,curMoveThrough:!1},l=Pc[d];if(!l)return e;var m=Qc[l].init,n=Qc[l].isComplete;for(m&&m(k);i!==g&&b;){if(k.index+=f,k.nextCh=k.lineText.charAt(k.index),!k.nextCh){if(i+=f,k.lineText=a.getLine(i)||"",f>0)k.index=0;else{var o=k.lineText.length;k.index=o>0?o-1:0}k.nextCh=k.lineText.charAt(k.index)}n(k)&&(e.line=i,e.ch=k.index,b--)}return k.nextCh||k.curMoveThrough?sc(i,k.index):e}function ob(a,b,c,d,e){var f=b.line,g=b.ch,h=a.getLine(f),i=c?1:-1,j=d?zc:yc;if(e&&""==h){if(f+=i,h=a.getLine(f),!n(a,f))return null;g=c?0:h.length}for(;;){if(e&&""==h)return{from:0,to:0,line:f};for(var k=i>0?h.length:-1,l=k,m=k;g!=k;){for(var o=!1,p=0;p<j.length&&!o;++p)if(j[p].test(h.charAt(g))){for(l=g;g!=k&&j[p].test(h.charAt(g));)g+=i;if(m=g,o=l!=m,l==b.ch&&f==b.line&&m==l+i)continue;return{from:Math.min(l,m+1),to:Math.max(l,m),line:f}}o||(g+=i)}if(f+=i,!n(a,f))return null;h=a.getLine(f),g=i>0?0:h.length}throw new Error("The impossible happened.")}function pb(a,b,c,d,e,f){var g=O(b),h=[];(d&&!e||!d&&e)&&c++;for(var i=!(d&&e),j=0;c>j;j++){var k=ob(a,b,d,f,i);if(!k){var l=U(a,a.lastLine());h.push(d?{line:a.lastLine(),from:l,to:l}:{line:0,from:0,to:0});break}h.push(k),b=sc(k.line,d?k.to-1:k.from)}var m=h.length!=c,n=h[0],o=h.pop();return d&&!e?(m||n.from==g.ch&&n.line==g.line||(o=h.pop()),sc(o.line,o.from)):d&&e?sc(o.line,o.to-1):!d&&e?(m||n.to==g.ch&&n.line==g.line||(o=h.pop()),sc(o.line,o.to)):sc(o.line,o.from)}function qb(a,b,c,d){for(var e,f=a.getCursor(),g=f.ch,h=0;b>h;h++){var i=a.getLine(f.line);if(e=tb(g,i,d,c,!0),-1==e)return null;g=e}return sc(a.getCursor().line,e)}function rb(a,b){var c=a.getCursor().line;return G(a,sc(c,b-1))}function sb(a,b,c,d){t(c,Dc)&&(b.marks[c]&&b.marks[c].clear(),b.marks[c]=a.setBookmark(d))}function tb(a,b,c,d,e){var f;return d?(f=b.indexOf(c,a+1),-1==f||e||(f-=1)):(f=b.lastIndexOf(c,a-1),-1==f||e||(f+=1)),f}function ub(a,b,c,d){var e,f,g=b,h={"(":/[()]/,")":/[()]/,"[":/[[\]]/,"]":/[[\]]/,"{":/[{}]/,"}":/[{}]/}[c],i={"(":"(",")":"(","[":"[","]":"[","{":"{","}":"{"}[c],j=a.getLine(g.line).charAt(g.ch),k=j===i?1:0;if(e=a.scanForBracket(sc(g.line,g.ch+k),-1,null,{bracketRegex:h}),f=a.scanForBracket(sc(g.line,g.ch+k),1,null,{bracketRegex:h}),!e||!f)return{start:g,end:g};if(e=e.pos,f=f.pos,e.line==f.line&&e.ch>f.ch||e.line>f.line){var l=e;e=f,f=l}return d?f.ch+=1:e.ch+=1,{start:e,end:f}}function vb(a,b,c,d){var e,f,g,h,i=O(b),j=a.getLine(i.line),k=j.split(""),l=k.indexOf(c);if(i.ch<l?i.ch=l:l<i.ch&&k[i.ch]==c&&(f=i.ch,--i.ch),k[i.ch]!=c||f)for(g=i.ch;g>-1&&!e;g--)k[g]==c&&(e=g+1);else e=i.ch+1;if(e&&!f)for(g=e,h=k.length;h>g&&!f;g++)k[g]==c&&(f=g);return e&&f?(d&&(--e,++f),{start:sc(i.line,e),end:sc(i.line,f)}):{start:i,end:i}}function wb(){}function xb(a){var b=a.state.vim;return b.searchState_||(b.searchState_=new wb)}function yb(a,b,c,d,e){a.openDialog?a.openDialog(b,d,{bottom:!0,value:e.value,onKeyDown:e.onKeyDown,onKeyUp:e.onKeyUp}):d(prompt(c,""))}function zb(a){var b=Ab(a)||[];if(!b.length)return[];var c=[];if(0===b[0]){for(var d=0;d<b.length;d++)"number"==typeof b[d]&&c.push(a.substring(b[d]+1,b[d+1]));return c}}function Ab(a){for(var b=!1,c=[],d=0;d<a.length;d++){var e=a.charAt(d);b||"/"!=e||c.push(d),b=!b&&"\\"==e}return c}function Bb(a){for(var b="|(){",c="}",d=!1,e=[],f=-1;f<a.length;f++){var g=a.charAt(f)||"",h=a.charAt(f+1)||"",i=h&&-1!=b.indexOf(h);d?("\\"===g&&i||e.push(g),d=!1):"\\"===g?(d=!0,h&&-1!=c.indexOf(h)&&(i=!0),i&&"\\"!==h||e.push(g)):(e.push(g),i&&"\\"!==h&&e.push("\\"))}return e.join("")}function Cb(a){for(var b=!1,c=[],d=-1;d<a.length;d++){var e=a.charAt(d)||"",f=a.charAt(d+1)||"";b?(c.push(e),b=!1):"\\"===e?(b=!0,q(f)||"$"===f?c.push("$"):"/"!==f&&"\\"!==f&&c.push("\\")):("$"===e&&c.push("$"),c.push(e),"/"===f&&c.push("\\"))}return c.join("")}function Db(a){for(var b=new pc.StringStream(a),c=[];!b.eol();){for(;b.peek()&&"\\"!=b.peek();)c.push(b.next());c.push(b.match("\\/",!0)?"/":b.match("\\\\",!0)?"\\":b.next())}return c.join("")}function Eb(a,b,c){var d=Ic.registerController.getRegister("/");if(d.setText(a),a instanceof RegExp)return a;var e,f,g=Ab(a);if(g.length){e=a.substring(0,g[0]);var h=a.substring(g[0]);f=-1!=h.indexOf("i")}else e=a;if(!e)return null;w("pcre")||(e=Bb(e)),c&&(b=/^[^A-Z]*$/.test(e));var i=new RegExp(e,b||f?"i":void 0);return i}function Fb(a,b){a.openNotification?a.openNotification('<span style="color: red">'+b+"</span>",{bottom:!0,duration:5e3}):alert(b)}function Gb(a,b){var c="";return a&&(c+='<span style="font-family: monospace">'+a+"</span>"),c+='<input type="text"/> <span style="color: #888">',b&&(c+='<span style="color: #888">',c+=b,c+="</span>"),c}function Hb(a,b){var c=(b.prefix||"")+" "+(b.desc||""),d=Gb(b.prefix,b.desc);yb(a,d,c,b.onClose,b)}function Ib(a,b){if(a instanceof RegExp&&b instanceof RegExp){for(var c=["global","multiline","ignoreCase","source"],d=0;d<c.length;d++){var e=c[d];if(a[e]!==b[e])return!1}return!0}return!1}function Jb(a,b,c,d){if(b){var e=xb(a),f=Eb(b,!!c,!!d);if(f)return Lb(a,f),Ib(f,e.getQuery())?f:(e.setQuery(f),f)}}function Kb(a){if("^"==a.source.charAt(0))var b=!0;return{token:function(c){if(b&&!c.sol())return void c.skipToEnd();var d=c.match(a,!1);if(d)return 0==d[0].length?(c.next(),"searching"):c.sol()||(c.backUp(1),a.exec(c.next()+d[0]))?(c.match(a),"searching"):(c.next(),null);for(;!c.eol()&&(c.next(),!c.match(a,!1)););},query:a}}function Lb(a,b){var c=xb(a).getOverlay();c&&b==c.query||(c&&a.removeOverlay(c),c=Kb(b),a.addOverlay(c),xb(a).setOverlay(c))}function Mb(a,b,c,d){return void 0===d&&(d=1),a.operation(function(){for(var e=a.getCursor(),f=a.getSearchCursor(c,e),g=0;d>g;g++){var h=f.find(b);if(0==g&&h&&P(f.from(),e)&&(h=f.find(b)),!h&&(f=a.getSearchCursor(c,b?sc(a.lastLine()):sc(a.firstLine(),0)),!f.find(b)))return}return f.from()})}function Nb(a){a.removeOverlay(xb(a).getOverlay()),xb(a).setOverlay(null)}function Ob(a,b,c){return"number"!=typeof a&&(a=a.line),b instanceof Array?t(a,b):c?a>=b&&c>=a:a==b}function Pb(a){var b=a.ace.renderer;return{top:b.getFirstFullyVisibleRow(),bottom:b.getLastFullyVisibleRow()}}function Qb(a,b,c,d,e,f,g,h,i){function j(){a.operation(function(){for(;!o;)k(),l();m()})}function k(){var b=a.getRange(f.from(),f.to()),c=b.replace(g,h);f.replace(c)}function l(){for(var b;b=f.findNext()&&Ob(f.from(),d,e);)if(c||!p||f.from().line!=p.line)return a.scrollIntoView(f.from(),30),a.setSelection(f.from(),f.to()),p=f.from(),void(o=!1);o=!0}function m(b){if(b&&b(),a.focus(),p){a.setCursor(p);var c=a.state.vim;c.exMode=!1,c.lastHPos=c.lastHSPos=p.ch}i&&i()}function n(b,c,d){pc.e_stop(b);var e=pc.keyName(b);switch(e){case"Y":k(),l();break;case"N":l();break;case"A":var f=i;i=void 0,a.operation(j),i=f;break;case"L":k();case"Q":case"Esc":case"Ctrl-C":case"Ctrl-[":m(d)}return o&&m(d),!0}a.state.vim.exMode=!0;var o=!1,p=f.from();return l(),o?void Fb(a,"No matches for "+g.source):b?void Hb(a,{prefix:"replace with <strong>"+h+"</strong> (y/n/a/q/l)",onKeyDown:n}):(j(),void(i&&i()))}function Rb(a){var b=a.state.vim,c=Ic.macroModeState,d=Ic.registerController.getRegister("."),e=c.isPlaying,f=c.lastInsertModeChanges,g=[];if(!e){for(var h=f.inVisualBlock?b.lastSelection.visualBlock.height:1,i=f.changes,g=[],j=0;j<i.length;)g.push(i[j]),i[j]instanceof $b?j++:j+=h;f.changes=g,a.off("change",Wb),pc.off(a.getInputField(),"keydown",_b)}!e&&b.insertModeRepeat>1&&(ac(a,b,b.insertModeRepeat-1,!0),b.lastEditInputState.repeatOverride=b.insertModeRepeat),delete b.insertModeRepeat,b.insertMode=!1,a.setCursor(a.getCursor().line,a.getCursor().ch-1),a.setOption("keyMap","vim"),a.setOption("disableInput",!0),a.toggleOverwrite(!1),d.setText(f.changes.join("")),pc.signal(a,"vim-mode-change",{mode:"normal"}),c.isRecording&&Ub(c)}function Sb(a,b,c,d){var e=Ic.registerController.getRegister(d),f=e.keyBuffer,g=0;c.isPlaying=!0,c.replaySearchQueries=e.searchQueries.slice(0);for(var h=0;h<f.length;h++)for(var i,j,k=f[h];k;)if(i=/<\w+-.+?>|<\w+>|./.exec(k),j=i[0],k=k.substring(i.index+j.length),pc.Vim.handleKey(a,j,"macro"),b.insertMode){var l=e.insertModeChanges[g++].changes;Ic.macroModeState.lastInsertModeChanges.changes=l,bc(a,l,1),Rb(a)}c.isPlaying=!1}function Tb(a,b){if(!a.isPlaying){var c=a.latestRegister,d=Ic.registerController.getRegister(c);d&&d.pushText(b)}}function Ub(a){if(!a.isPlaying){var b=a.latestRegister,c=Ic.registerController.getRegister(b);c&&c.pushInsertModeChanges(a.lastInsertModeChanges)}}function Vb(a,b){if(!a.isPlaying){var c=a.latestRegister,d=Ic.registerController.getRegister(c);d&&d.pushSearchQuery(b)}}function Wb(a,b){var c=Ic.macroModeState,d=c.lastInsertModeChanges;if(!c.isPlaying)for(;b;){if(d.expectCursorActivityForChange=!0,"+input"==b.origin||"paste"==b.origin||void 0===b.origin){var e=b.text.join("\n");d.changes.push(e)}b=b.next}}function Xb(a){var b=a.state.vim;if(b.insertMode){var c=Ic.macroModeState;if(c.isPlaying)return;var d=c.lastInsertModeChanges;d.expectCursorActivityForChange?d.expectCursorActivityForChange=!1:d.changes=[]}else a.curOp.isVimOp||Zb(a,b);b.visualMode&&Yb(a)}function Yb(a){var b=a.state.vim,c=O(b.sel.head),d=I(c,0,1);b.fakeCursor&&b.fakeCursor.clear(),b.fakeCursor=a.markText(c,d,{className:"cm-animate-fat-cursor"})}function Zb(a,b){var c=a.getCursor("anchor"),d=a.getCursor("head");if(b.visualMode&&P(d,c)&&U(a,d.line)>d.ch?gb(a,!1):b.visualMode||b.insertMode||!a.somethingSelected()||(b.visualMode=!0,b.visualLine=!1,pc.signal(a,"vim-mode-change",{mode:"visual"})),b.visualMode){var e=Q(d,c)?0:-1,f=Q(d,c)?-1:0;d=I(d,0,e),c=I(c,0,f),b.sel={anchor:c,head:d},sb(a,b,"<",R(d,c)),sb(a,b,">",S(d,c))}else b.insertMode||(b.lastHPos=a.getCursor().ch)}function $b(a){this.keyName=a}function _b(a){function b(){return d.changes.push(new $b(e)),!0}var c=Ic.macroModeState,d=c.lastInsertModeChanges,e=pc.keyName(a);(-1!=e.indexOf("Delete")||-1!=e.indexOf("Backspace"))&&pc.lookupKey(e,"vim-insert",b)}function ac(a,b,c,d){function e(){h?Lc.processAction(a,b,b.lastEditActionCommand):Lc.evalInput(a,b)}function f(c){if(g.lastInsertModeChanges.changes.length>0){c=b.lastEditActionCommand?c:1;var d=g.lastInsertModeChanges;bc(a,d.changes,c)}}var g=Ic.macroModeState;g.isPlaying=!0;var h=!!b.lastEditActionCommand,i=b.inputState;if(b.inputState=b.lastEditInputState,h&&b.lastEditActionCommand.interlaceInsertRepeat)for(var j=0;c>j;j++)e(),f(1);else d||e(),f(c);b.inputState=i,b.insertMode&&!d&&Rb(a),g.isPlaying=!1}function bc(a,b,c){function d(b){return"string"==typeof b?pc.commands[b](a):b(a),!0}var e=a.getCursor("head"),f=Ic.macroModeState.lastInsertModeChanges.inVisualBlock;if(f){var g=a.state.vim,h=g.lastSelection,i=J(h.anchor,h.head);$(a,e,i.line+1),c=a.listSelections().length,a.setCursor(e)}for(var j=0;c>j;j++){f&&a.setCursor(I(e,j,0));for(var k=0;k<b.length;k++){var l=b[k];if(l instanceof $b)pc.lookupKey(l.keyName,"vim-insert",d);else{var m=a.getCursor();a.replaceRange(l,m,m)}}}f&&a.setCursor(I(e,0,1))}function e(a,b,c){b.length>1&&"n"==b[0]&&(b=b.replace("numpad","")),b=uc[b]||b;var d="";return c.ctrlKey&&(d+="C-"),c.altKey&&(d+="A-"),c.shiftKey&&(d+="S-"),d+=b,d.length>1&&(d="<"+d+">"),d}function cc(a){var b=new a.constructor;return Object.keys(a).forEach(function(c){var d=a[c];Array.isArray(d)?d=d.slice():d&&"object"==typeof d&&d.constructor!=Object&&(d=cc(d)),b[c]=d}),a.sel&&(b.sel={head:a.sel.head&&O(a.sel.head),anchor:a.sel.anchor&&O(a.sel.anchor)}),b}function dc(a,b,c){var d=!1,e=wc.maybeInitVimState_(a),f=e.visualBlock||e.wasInVisualBlock;if(e.wasInVisualBlock&&!a.ace.inMultiSelectMode?e.wasInVisualBlock=!1:a.ace.inMultiSelectMode&&e.visualBlock&&(e.wasInVisualBlock=!0),"<Esc>"!=b||e.insertMode||e.visualMode||!a.ace.inMultiSelectMode)if(f||!a.ace.inMultiSelectMode||a.ace.inVirtualSelectionMode)d=wc.handleKey(a,b,c);else{var g=cc(e);a.operation(function(){a.ace.forEachSelection(function(){var e=a.ace.selection;a.state.vim.lastHPos=null==e.$desiredColumn?e.lead.column:e.$desiredColumn;var f=a.getCursor("head"),h=a.getCursor("anchor"),i=Q(f,h)?0:-1,j=Q(f,h)?-1:0;f=I(f,0,i),h=I(h,0,j),a.state.vim.sel.head=f,a.state.vim.sel.anchor=h,d=Wc(a,b,c),e.$desiredColumn=-1==a.state.vim.lastHPos?null:a.state.vim.lastHPos,a.virtualSelectionMode()&&(a.state.vim=cc(g))}),a.curOp.cursorActivity&&!d&&(a.curOp.cursorActivity=!1)},!0)}else a.ace.exitMultiSelectMode();return d}function ec(a,b){b.off("beforeEndOperation",ec);var c=b.state.cm.vimCmd;c&&b.execCommand(c.exec?c:c.name,c.args),b.curOp=b.prevOp}var fc=a("../range").Range,gc=a("../lib/event_emitter").EventEmitter,hc=a("../lib/dom"),ic=a("../lib/oop"),jc=a("../lib/keys"),kc=a("../lib/event"),lc=a("../search").Search,mc=a("../lib/useragent"),nc=a("../search_highlight").SearchHighlight,oc=a("../commands/multi_select_commands");a("../multi_select");var pc=function(a){this.ace=a,this.state={},this.marks={},this.$uid=0,this.onChange=this.onChange.bind(this),this.onSelectionChange=this.onSelectionChange.bind(this),this.onBeforeEndOperation=this.onBeforeEndOperation.bind(this),this.ace.on("change",this.onChange),this.ace.on("changeSelection",this.onSelectionChange),this.ace.on("beforeEndOperation",this.onBeforeEndOperation)};pc.Pos=function(a,b){return this instanceof sc?(this.line=a,void(this.ch=b)):new sc(a,b)},pc.defineOption=function(){},pc.commands={redo:function(a){a.ace.redo()},undo:function(a){a.ace.undo()},newlineAndIndent:function(a){a.ace.insert("\n")}},pc.keyMap={},pc.addClass=pc.rmClass=pc.e_stop=function(){},pc.keyName=function(a){if(a.key)return a.key;var b=jc[a.keyCode]||"";return 1==b.length&&(b=b.toUpperCase()),b=kc.getModifierString(a).replace(/(^|-)\w/g,function(a){return a.toUpperCase()})+b},pc.keyMap["default"]=function(a){return function(b){var c=b.ace.commands.commandKeyBinding[a.toLowerCase()];return c&&b.ace.execCommand(c)!==!1}},pc.lookupKey=function Yc(a,b,c){"string"==typeof b&&(b=pc.keyMap[b]);var d="function"==typeof b?b(a):b[a];if(d===!1)return"nothing";if("..."===d)return"multi";if(null!=d&&c(d))return"handled";if(b.fallthrough){if(!Array.isArray(b.fallthrough))return Yc(a,b.fallthrough,c);for(var e=0;e<b.fallthrough.length;e++){var f=Yc(a,b.fallthrough[e],c);if(f)return f}}},pc.signal=function(a,b,c){return a._signal(b,c)},pc.on=kc.addListener,pc.off=kc.removeListener,function(){ic.implement(pc.prototype,gc),this.destroy=function(){this.ace.off("change",this.onChange),this.ace.off("changeSelection",this.onSelectionChange),this.ace.off("beforeEndOperation",this.onBeforeEndOperation),this.removeOverlay()},this.virtualSelectionMode=function(){return this.ace.inVirtualSelectionMode&&this.ace.selection.index},this.onChange=function(a){var b=a.data;if(a={start:b.range.start,end:b.range.end,action:b.action,lines:b.lines||[b.text]},"i"==a.action[0]){var c={text:a.lines},d=this.curOp=this.curOp||{};if(d.changeHandlers||(d.changeHandlers=this._eventRegistry.change&&this._eventRegistry.change.slice()),this.virtualSelectionMode())return;d.lastChange?d.lastChange.next=d.lastChange=c:d.lastChange=d.change=c}this.$updateMarkers(a)},this.onSelectionChange=function(){var a=this.curOp=this.curOp||{};a.cursorActivityHandlers||(a.cursorActivityHandlers=this._eventRegistry.cursorActivity&&this._eventRegistry.cursorActivity.slice()),this.curOp.cursorActivity=!0,this.ace.inMultiSelectMode&&this.ace.keyBinding.removeKeyboardHandler(oc.keyboardHandler)},this.operation=function(a,b){if(!b&&this.curOp||b&&this.curOp&&this.curOp.force)return a();if((b||!this.ace.curOp)&&this.curOp&&this.onBeforeEndOperation(),!this.ace.curOp){var c=this.ace.prevOp;this.ace.startOperation({command:{name:"vim",scrollIntoView:"cursor"}})}var d=this.curOp=this.curOp||{};this.curOp.force=b;var e=a();return this.ace.curOp&&"vim"==this.ace.curOp.command.name&&(this.ace.endOperation(),d.cursorActivity||d.lastChange||!c||(this.ace.prevOp=c)),(b||!this.ace.curOp)&&this.curOp&&this.onBeforeEndOperation(),e},this.onBeforeEndOperation=function(){var a=this.curOp;a&&(a.change&&this.signal("change",a.change,a),a&&a.cursorActivity&&this.signal("cursorActivity",null,a),this.curOp=null)},this.signal=function(a,b,c){var d=c?c[a+"Handlers"]:(this._eventRegistry||{})[a];if(d){d=d.slice();for(var e=0;e<d.length;e++)d[e](this,b)}},this.firstLine=function(){return 0},this.lastLine=function(){return this.ace.session.getLength()-1},this.lineCount=function(){return this.ace.session.getLength()},this.setCursor=function(a,b){"object"==typeof a&&(b=a.ch,a=a.line),this.ace.inVirtualSelectionMode||this.ace.exitMultiSelectMode(),this.ace.selection.moveTo(a,b)},this.getCursor=function(a){var b=this.ace.selection,c="anchor"==a?b.isEmpty()?b.lead:b.anchor:"head"!=a&&a?b.getRange()[a]:b.lead;return d(c)},this.listSelections=function(){var a=this.ace.multiSelect.rangeList.ranges;return!a.length||this.ace.inVirtualSelectionMode?[{anchor:this.getCursor("anchor"),head:this.getCursor("head")}]:a.map(function(a){return{anchor:this.clipPos(d(a.cursor==a.end?a.start:a.end)),head:this.clipPos(d(a.cursor))}},this)},this.setSelections=function(a,b){var d=this.ace.multiSelect,e=a.map(function(a){var b=c(a.anchor),d=c(a.head),e=fc.comparePoints(b,d)<0?new fc.fromPoints(b,d):new fc.fromPoints(d,b);return e.cursor=fc.comparePoints(e.start,d)?e.end:e.start,e});if(this.ace.inVirtualSelectionMode)return void this.ace.selection.fromOrientedRange(e[0]);b?e[b]&&e.push(e.splice(b,1)[0]):e=e.reverse(),d.toSingleRange(e[0].clone());for(var f=this.ace.session,g=0;g<e.length;g++){var h=f.$clipRangeToDocument(e[g]);d.addRange(h)}},this.setSelection=function(a,b,c){var d=this.ace.selection;d.moveTo(a.line,a.ch),d.selectTo(b.line,b.ch),c&&"*mouse"==c.origin&&this.onBeforeEndOperation()},this.somethingSelected=function(){return!this.ace.selection.isEmpty()},this.clipPos=function(a){var b=this.ace.session.$clipPositionToDocument(a.line,a.ch);return d(b)},this.markText=function(){return{clear:function(){},find:function(){}}},this.$updateMarkers=function(a){var b="insert"==a.action,c=a.start,d=a.end,e=(d.row-c.row)*(b?1:-1),f=(d.column-c.column)*(b?1:-1);b&&(d=c);for(var g in this.marks){var h=this.marks[g],i=fc.comparePoints(h,c);if(!(0>i)){if(0===i&&b){if(1!=h.bias){-1==h.bias;continue}i=1}var j=b?i:fc.comparePoints(h,d);j>0?(h.row+=e,h.column+=h.row==d.row?f:0):!b&&0>=j&&(h.row=c.row,h.column=c.column,0===j&&(h.bias=1))}}};var a=function(a,b,c,d){this.cm=a,this.id=b,this.row=c,this.column=d,a.marks[this.id]=this};a.prototype.clear=function(){delete this.cm.marks[this.id]},a.prototype.find=function(){return d(this)},this.setBookmark=function(b,c){var d=new a(this,this.$uid++,b.line,b.ch);return c&&c.insertLeft||(d.$insertRight=!0),this.marks[d.id]=d,d},this.moveH=function(a,b){if("char"==b){var c=this.ace.selection;c.clearSelection(),c.moveCursorBy(0,a)}},this.findPosV=function(a,b,c,e){if("line"==c){var f=this.ace.session.documentToScreenPosition(a.line,a.ch);null!=e&&(f.column=e),f.row+=b,f.row=Math.min(Math.max(0,f.row),this.ace.session.getScreenLength()-1);var g=this.ace.session.screenToDocumentPosition(f.row,f.column);return d(g)}},this.charCoords=function(a,b){if("div"==b||!b){var c=this.ace.session.documentToScreenPosition(a.line,a.ch);return{left:c.column,top:c.row}}if("local"==b){var d=this.ace.renderer,c=this.ace.session.documentToScreenPosition(a.line,a.ch),e=d.layerConfig.lineHeight,f=d.layerConfig.characterWidth,g=e*c.row;return{left:c.column*f,top:g,bottom:g+e}}},this.coordsChar=function(a,b){var c=this.ace.renderer;if("local"==b){var e=Math.max(0,Math.floor(a.top/c.lineHeight)),f=Math.max(0,Math.floor(a.left/c.characterWidth)),g=c.session.screenToDocumentPosition(e,f);return d(g)}if("div"==b)throw"not implemented"},this.openDialog=function(){},this.getSearchCursor=function(a,b){var c=!1,e=!1;a instanceof RegExp&&!a.global&&(c=!a.ignoreCase,a=a.source,e=!0);var f=new lc;void 0==b.ch&&(b.ch=Number.MAX_VALUE);var g={row:b.line,column:b.ch},h=this,i=null;return{findNext:function(){return this.find(!1)},findPrevious:function(){return this.find(!0)},find:function(b){f.setOptions({needle:a,caseSensitive:c,wrap:!1,backwards:b,regExp:e,start:i||g});var d=f.find(h.ace.session);return d&&d.isEmpty()&&h.getLine(d.start.row).length==d.start.column&&(f.$options.start=d,d=f.find(h.ace.session)),i=d},from:function(){return i&&d(i.start)},to:function(){return i&&d(i.end)},replace:function(a){i&&(i.end=h.ace.session.doc.replace(i,a))}}},this.scrollTo=function(a,b){var c=this.ace.renderer,d=c.layerConfig,e=d.maxHeight;e-=(c.$size.scrollerHeight-c.lineHeight)*c.$scrollPastEnd,null!=b&&this.ace.session.setScrollTop(Math.max(0,Math.min(b,e))),null!=a&&this.ace.session.setScrollLeft(Math.max(0,Math.min(a,d.width)))},this.scrollInfo=function(){return 0},this.scrollIntoView=function(a,b){a&&this.ace.renderer.scrollCursorIntoView(c(a),null,b)},this.getLine=function(a){return this.ace.session.getLine(a)},this.getRange=function(a,b){return this.ace.session.getTextRange(new fc(a.line,a.ch,b.line,b.ch))},this.replaceRange=function(a,b,c){return c||(c=b),this.ace.session.replace(new fc(b.line,b.ch,c.line,c.ch),a)},this.replaceSelections=function(a){var b=this.ace.selection;if(this.ace.inVirtualSelectionMode)return void this.ace.session.replace(b.getRange(),a[0]||"");b.inVirtualSelectionMode=!0;var c=b.rangeList.ranges;c.length||(c=[this.ace.multiSelect.getRange()]);for(var d=c.length;d--;)this.ace.session.replace(c[d],a[d]||"");b.inVirtualSelectionMode=!1},this.getSelection=function(){return this.ace.getSelectedText()},this.getSelections=function(){return this.listSelections().map(function(a){return this.getRange(a.anchor,a.head)},this)},this.getInputField=function(){return this.ace.textInput.getElement()},this.getWrapperElement=function(){return this.ace.containter};var b={indentWithTabs:"useSoftTabs",indentUnit:"tabSize",firstLineNumber:"firstLineNumber"};this.setOption=function(a,c){switch(this.state[a]=c,a){case"indentWithTabs":a=b[a],c=!c;break;default:a=b[a]}a&&this.ace.setOption(a,c)},this.getOption=function(a,c){var d=b[a];switch(d&&(c=this.ace.getOption(d)),a){case"indentWithTabs":return a=b[a],!c
}return d?c:this.state[a]},this.toggleOverwrite=function(a){return this.state.overwrite=a,this.ace.setOverwrite(a)},this.addOverlay=function(a){if(!this.$searchHighlight||!this.$searchHighlight.session){var b=new nc(null,"ace_highlight-marker","text"),c=this.ace.session.addDynamicMarker(b);b.id=c.id,b.session=this.ace.session,b.destroy=function(){b.session.off("change",b.updateOnChange),b.session.off("changeEditor",b.destroy),b.session.removeMarker(b.id),b.session=null},b.updateOnChange=function(a){a=a.data.range;var c=a.start.row;c==a.end.row?b.cache[c]=void 0:b.cache.splice(c,b.cache.length)},b.session.on("changeEditor",b.destroy),b.session.on("change",b.updateOnChange)}var d=new RegExp(a.query.source,"gmi");console.log(d),this.$searchHighlight=a.highlight=b,this.$searchHighlight.setRegexp(d),this.ace.renderer.updateBackMarkers()},this.removeOverlay=function(){this.$searchHighlight&&this.$searchHighlight.session&&this.$searchHighlight.destroy()},this.getScrollInfo=function(){var a=this.ace.renderer,b=a.layerConfig;return{left:a.scrollLeft,top:a.scrollTop,height:b.maxHeight,width:b.width,clientHeight:b.height,clientWidth:b.width}},this.getValue=function(){return this.ace.getValue()},this.setValue=function(a){return this.ace.setValue(a)},this.getTokenTypeAt=function(a){var b=this.ace.session.getTokenAt(a.line,a.ch);return b&&/comment|string/.test(b.type)?"string":""},this.findMatchingBracket=function(a){var b=this.ace.session.findMatchingBracket(c(a));return{to:b&&d(b)}},this.indentLine=function(a,b){b===!0?this.ace.session.indentRows(a,a,"	"):b===!1&&this.ace.session.outdentRows(new fc(a,0,a,0))},this.indexFromPos=function(a){return this.ace.session.doc.positionToIndex(c(a))},this.posFromIndex=function(a){return d(this.ace.session.doc.indexToPosition(a))},this.focus=function(){return this.ace.focus()},this.blur=function(){return this.ace.blur()},this.defaultTextHeight=function(){return this.ace.renderer.layerConfig.lineHeight},this.scanForBracket=function(a,b,e,f){var g=f.bracketRegex.source;if(1==b)var h=this.ace.session.$findClosingBracket(g.slice(1,2),c(a),/paren|text/);else var h=this.ace.session.$findOpeningBracket(g.slice(-2,-1),{row:a.line,column:a.ch+1},/paren|text/);return h&&{pos:d(h)}},this.refresh=function(){return this.ace.resize(!0)}}.call(pc.prototype);var qc=pc.StringStream=function(a,b){this.pos=this.start=0,this.string=a,this.tabSize=b||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0};qc.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==this.lineStart},peek:function(){return this.string.charAt(this.pos)||void 0},next:function(){return this.pos<this.string.length?this.string.charAt(this.pos++):void 0},eat:function(a){var b=this.string.charAt(this.pos);if("string"==typeof a)var c=b==a;else var c=b&&(a.test?a.test(b):a(b));return c?(++this.pos,b):void 0},eatWhile:function(a){for(var b=this.pos;this.eat(a););return this.pos>b},eatSpace:function(){for(var a=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>a},skipToEnd:function(){this.pos=this.string.length},skipTo:function(a){var b=this.string.indexOf(a,this.pos);return b>-1?(this.pos=b,!0):void 0},backUp:function(a){this.pos-=a},column:function(){throw"not implemented"},indentation:function(){throw"not implemented"},match:function(a,b,c){if("string"!=typeof a){var d=this.string.slice(this.pos).match(a);return d&&d.index>0?null:(d&&b!==!1&&(this.pos+=d[0].length),d)}var e=function(a){return c?a.toLowerCase():a},f=this.string.substr(this.pos,a.length);return e(f)==e(a)?(b!==!1&&(this.pos+=a.length),!0):void 0},current:function(){return this.string.slice(this.start,this.pos)},hideFirstChars:function(a,b){this.lineStart+=a;try{return b()}finally{this.lineStart-=a}}},pc.defineExtension=function(a,b){pc.prototype[a]=b},hc.importCssString(".normal-mode .ace_cursor{  border: 0!important;  background-color: red;  opacity: 0.5;}.ace_dialog {  position: absolute;  left: 0; right: 0;  background: white;  z-index: 15;  padding: .1em .8em;  overflow: hidden;  color: #333;}.ace_dialog-top {  border-bottom: 1px solid #eee;  top: 0;}.ace_dialog-bottom {  border-top: 1px solid #eee;  bottom: 0;}.ace_dialog input {  border: none;  outline: none;  background: transparent;  width: 20em;  color: inherit;  font-family: monospace;}","vimMode"),function(){function a(a,b,c){var d,e=a.ace.container;return d=e.appendChild(document.createElement("div")),d.className=c?"ace_dialog ace_dialog-bottom":"ace_dialog ace_dialog-top","string"==typeof b?d.innerHTML=b:d.appendChild(b),d}function b(a,b){a.state.currentNotificationClose&&a.state.currentNotificationClose(),a.state.currentNotificationClose=b}pc.defineExtension("openDialog",function(c,d,e){function f(a){if("string"==typeof a)k.value=a;else{if(i)return;i=!0,h.parentNode.removeChild(h),j.focus(),e.onClose&&e.onClose(h)}}if(!this.virtualSelectionMode()){e||(e={}),b(this,null);var g,h=a(this,c,e.bottom),i=!1,j=this,k=h.getElementsByTagName("input")[0];return k?(e.value&&(k.value=e.value,k.select()),e.onInput&&pc.on(k,"input",function(a){e.onInput(a,k.value,f)}),e.onKeyUp&&pc.on(k,"keyup",function(a){e.onKeyUp(a,k.value,f)}),pc.on(k,"keydown",function(a){e&&e.onKeyDown&&e.onKeyDown(a,k.value,f)||((27==a.keyCode||e.closeOnEnter!==!1&&13==a.keyCode)&&(k.blur(),pc.e_stop(a),f()),13==a.keyCode&&d(k.value))}),e.closeOnBlur!==!1&&pc.on(k,"blur",f),k.focus()):(g=h.getElementsByTagName("button")[0])&&(pc.on(g,"click",function(){f(),j.focus()}),e.closeOnBlur!==!1&&pc.on(g,"blur",f),g.focus()),f}}),pc.defineExtension("openNotification",function(c,d){function e(){h||(h=!0,clearTimeout(f),g.parentNode.removeChild(g))}if(!this.virtualSelectionMode()){b(this,e);var f,g=a(this,c,d&&d.bottom),h=!1,i=d&&"undefined"!=typeof d.duration?d.duration:5e3;return pc.on(g,"click",function(a){pc.e_preventDefault(a),e()}),i&&(f=setTimeout(e,i)),e}})}();var rc=[{keys:"<Left>",type:"keyToKey",toKeys:"h"},{keys:"<Right>",type:"keyToKey",toKeys:"l"},{keys:"<Up>",type:"keyToKey",toKeys:"k"},{keys:"<Down>",type:"keyToKey",toKeys:"j"},{keys:"<Space>",type:"keyToKey",toKeys:"l"},{keys:"<BS>",type:"keyToKey",toKeys:"h"},{keys:"<C-Space>",type:"keyToKey",toKeys:"W"},{keys:"<C-BS>",type:"keyToKey",toKeys:"B"},{keys:"<S-Space>",type:"keyToKey",toKeys:"w"},{keys:"<S-BS>",type:"keyToKey",toKeys:"b"},{keys:"<C-n>",type:"keyToKey",toKeys:"j"},{keys:"<C-p>",type:"keyToKey",toKeys:"k"},{keys:"<C-[>",type:"keyToKey",toKeys:"<Esc>"},{keys:"<C-c>",type:"keyToKey",toKeys:"<Esc>"},{keys:"<C-[>",type:"keyToKey",toKeys:"<Esc>",context:"insert"},{keys:"<C-c>",type:"keyToKey",toKeys:"<Esc>",context:"insert"},{keys:"s",type:"keyToKey",toKeys:"cl",context:"normal"},{keys:"s",type:"keyToKey",toKeys:"xi",context:"visual"},{keys:"S",type:"keyToKey",toKeys:"cc",context:"normal"},{keys:"S",type:"keyToKey",toKeys:"dcc",context:"visual"},{keys:"<Home>",type:"keyToKey",toKeys:"0"},{keys:"<End>",type:"keyToKey",toKeys:"$"},{keys:"<PageUp>",type:"keyToKey",toKeys:"<C-b>"},{keys:"<PageDown>",type:"keyToKey",toKeys:"<C-f>"},{keys:"<CR>",type:"keyToKey",toKeys:"j^",context:"normal"},{keys:"H",type:"motion",motion:"moveToTopLine",motionArgs:{linewise:!0,toJumplist:!0}},{keys:"M",type:"motion",motion:"moveToMiddleLine",motionArgs:{linewise:!0,toJumplist:!0}},{keys:"L",type:"motion",motion:"moveToBottomLine",motionArgs:{linewise:!0,toJumplist:!0}},{keys:"h",type:"motion",motion:"moveByCharacters",motionArgs:{forward:!1}},{keys:"l",type:"motion",motion:"moveByCharacters",motionArgs:{forward:!0}},{keys:"j",type:"motion",motion:"moveByLines",motionArgs:{forward:!0,linewise:!0}},{keys:"k",type:"motion",motion:"moveByLines",motionArgs:{forward:!1,linewise:!0}},{keys:"gj",type:"motion",motion:"moveByDisplayLines",motionArgs:{forward:!0}},{keys:"gk",type:"motion",motion:"moveByDisplayLines",motionArgs:{forward:!1}},{keys:"w",type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!1}},{keys:"W",type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!1,bigWord:!0}},{keys:"e",type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!0,inclusive:!0}},{keys:"E",type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!0,bigWord:!0,inclusive:!0}},{keys:"b",type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!1}},{keys:"B",type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!1,bigWord:!0}},{keys:"ge",type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!0,inclusive:!0}},{keys:"gE",type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!0,bigWord:!0,inclusive:!0}},{keys:"{",type:"motion",motion:"moveByParagraph",motionArgs:{forward:!1,toJumplist:!0}},{keys:"}",type:"motion",motion:"moveByParagraph",motionArgs:{forward:!0,toJumplist:!0}},{keys:"<C-f>",type:"motion",motion:"moveByPage",motionArgs:{forward:!0}},{keys:"<C-b>",type:"motion",motion:"moveByPage",motionArgs:{forward:!1}},{keys:"<C-d>",type:"motion",motion:"moveByScroll",motionArgs:{forward:!0,explicitRepeat:!0}},{keys:"<C-u>",type:"motion",motion:"moveByScroll",motionArgs:{forward:!1,explicitRepeat:!0}},{keys:"gg",type:"motion",motion:"moveToLineOrEdgeOfDocument",motionArgs:{forward:!1,explicitRepeat:!0,linewise:!0,toJumplist:!0}},{keys:"G",type:"motion",motion:"moveToLineOrEdgeOfDocument",motionArgs:{forward:!0,explicitRepeat:!0,linewise:!0,toJumplist:!0}},{keys:"0",type:"motion",motion:"moveToStartOfLine"},{keys:"^",type:"motion",motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:"+",type:"motion",motion:"moveByLines",motionArgs:{forward:!0,toFirstChar:!0}},{keys:"-",type:"motion",motion:"moveByLines",motionArgs:{forward:!1,toFirstChar:!0}},{keys:"_",type:"motion",motion:"moveByLines",motionArgs:{forward:!0,toFirstChar:!0,repeatOffset:-1}},{keys:"$",type:"motion",motion:"moveToEol",motionArgs:{inclusive:!0}},{keys:"%",type:"motion",motion:"moveToMatchedSymbol",motionArgs:{inclusive:!0,toJumplist:!0}},{keys:"f<character>",type:"motion",motion:"moveToCharacter",motionArgs:{forward:!0,inclusive:!0}},{keys:"F<character>",type:"motion",motion:"moveToCharacter",motionArgs:{forward:!1}},{keys:"t<character>",type:"motion",motion:"moveTillCharacter",motionArgs:{forward:!0,inclusive:!0}},{keys:"T<character>",type:"motion",motion:"moveTillCharacter",motionArgs:{forward:!1}},{keys:";",type:"motion",motion:"repeatLastCharacterSearch",motionArgs:{forward:!0}},{keys:",",type:"motion",motion:"repeatLastCharacterSearch",motionArgs:{forward:!1}},{keys:"'<character>",type:"motion",motion:"goToMark",motionArgs:{toJumplist:!0,linewise:!0}},{keys:"`<character>",type:"motion",motion:"goToMark",motionArgs:{toJumplist:!0}},{keys:"]`",type:"motion",motion:"jumpToMark",motionArgs:{forward:!0}},{keys:"[`",type:"motion",motion:"jumpToMark",motionArgs:{forward:!1}},{keys:"]'",type:"motion",motion:"jumpToMark",motionArgs:{forward:!0,linewise:!0}},{keys:"['",type:"motion",motion:"jumpToMark",motionArgs:{forward:!1,linewise:!0}},{keys:"]p",type:"action",action:"paste",isEdit:!0,actionArgs:{after:!0,isEdit:!0,matchIndent:!0}},{keys:"[p",type:"action",action:"paste",isEdit:!0,actionArgs:{after:!1,isEdit:!0,matchIndent:!0}},{keys:"]<character>",type:"motion",motion:"moveToSymbol",motionArgs:{forward:!0,toJumplist:!0}},{keys:"[<character>",type:"motion",motion:"moveToSymbol",motionArgs:{forward:!1,toJumplist:!0}},{keys:"|",type:"motion",motion:"moveToColumn"},{keys:"o",type:"motion",motion:"moveToOtherHighlightedEnd",context:"visual"},{keys:"O",type:"motion",motion:"moveToOtherHighlightedEnd",motionArgs:{sameLine:!0},context:"visual"},{keys:"d",type:"operator",operator:"delete"},{keys:"y",type:"operator",operator:"yank"},{keys:"c",type:"operator",operator:"change"},{keys:">",type:"operator",operator:"indent",operatorArgs:{indentRight:!0}},{keys:"<",type:"operator",operator:"indent",operatorArgs:{indentRight:!1}},{keys:"g~",type:"operator",operator:"changeCase"},{keys:"gu",type:"operator",operator:"changeCase",operatorArgs:{toLower:!0},isEdit:!0},{keys:"gU",type:"operator",operator:"changeCase",operatorArgs:{toLower:!1},isEdit:!0},{keys:"n",type:"motion",motion:"findNext",motionArgs:{forward:!0,toJumplist:!0}},{keys:"N",type:"motion",motion:"findNext",motionArgs:{forward:!1,toJumplist:!0}},{keys:"x",type:"operatorMotion",operator:"delete",motion:"moveByCharacters",motionArgs:{forward:!0},operatorMotionArgs:{visualLine:!1}},{keys:"X",type:"operatorMotion",operator:"delete",motion:"moveByCharacters",motionArgs:{forward:!1},operatorMotionArgs:{visualLine:!0}},{keys:"D",type:"operatorMotion",operator:"delete",motion:"moveToEol",motionArgs:{inclusive:!0},context:"normal"},{keys:"D",type:"operator",operator:"delete",operatorArgs:{linewise:!0},context:"visual"},{keys:"Y",type:"operatorMotion",operator:"yank",motion:"moveToEol",motionArgs:{inclusive:!0},context:"normal"},{keys:"Y",type:"operator",operator:"yank",operatorArgs:{linewise:!0},context:"visual"},{keys:"C",type:"operatorMotion",operator:"change",motion:"moveToEol",motionArgs:{inclusive:!0},context:"normal"},{keys:"C",type:"operator",operator:"change",operatorArgs:{linewise:!0},context:"visual"},{keys:"~",type:"operatorMotion",operator:"changeCase",motion:"moveByCharacters",motionArgs:{forward:!0},operatorArgs:{shouldMoveCursor:!0},context:"normal"},{keys:"~",type:"operator",operator:"changeCase",context:"visual"},{keys:"<C-w>",type:"operatorMotion",operator:"delete",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!1},context:"insert"},{keys:"<C-i>",type:"action",action:"jumpListWalk",actionArgs:{forward:!0}},{keys:"<C-o>",type:"action",action:"jumpListWalk",actionArgs:{forward:!1}},{keys:"<C-e>",type:"action",action:"scroll",actionArgs:{forward:!0,linewise:!0}},{keys:"<C-y>",type:"action",action:"scroll",actionArgs:{forward:!1,linewise:!0}},{keys:"a",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"charAfter"},context:"normal"},{keys:"A",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"eol"},context:"normal"},{keys:"A",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"endOfSelectedArea"},context:"visual"},{keys:"i",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"inplace"},context:"normal"},{keys:"I",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"firstNonBlank"},context:"normal"},{keys:"I",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"startOfSelectedArea"},context:"visual"},{keys:"o",type:"action",action:"newLineAndEnterInsertMode",isEdit:!0,interlaceInsertRepeat:!0,actionArgs:{after:!0},context:"normal"},{keys:"O",type:"action",action:"newLineAndEnterInsertMode",isEdit:!0,interlaceInsertRepeat:!0,actionArgs:{after:!1},context:"normal"},{keys:"v",type:"action",action:"toggleVisualMode"},{keys:"V",type:"action",action:"toggleVisualMode",actionArgs:{linewise:!0}},{keys:"<C-v>",type:"action",action:"toggleVisualMode",actionArgs:{blockwise:!0}},{keys:"gv",type:"action",action:"reselectLastSelection"},{keys:"J",type:"action",action:"joinLines",isEdit:!0},{keys:"p",type:"action",action:"paste",isEdit:!0,actionArgs:{after:!0,isEdit:!0}},{keys:"P",type:"action",action:"paste",isEdit:!0,actionArgs:{after:!1,isEdit:!0}},{keys:"r<character>",type:"action",action:"replace",isEdit:!0},{keys:"@<character>",type:"action",action:"replayMacro"},{keys:"q<character>",type:"action",action:"enterMacroRecordMode"},{keys:"R",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{replace:!0}},{keys:"u",type:"action",action:"undo",context:"normal"},{keys:"u",type:"operator",operator:"changeCase",operatorArgs:{toLower:!0},context:"visual",isEdit:!0},{keys:"U",type:"operator",operator:"changeCase",operatorArgs:{toLower:!1},context:"visual",isEdit:!0},{keys:"<C-r>",type:"action",action:"redo"},{keys:"m<character>",type:"action",action:"setMark"},{keys:'"<character>',type:"action",action:"setRegister"},{keys:"zz",type:"action",action:"scrollToCursor",actionArgs:{position:"center"}},{keys:"z.",type:"action",action:"scrollToCursor",actionArgs:{position:"center"},motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:"zt",type:"action",action:"scrollToCursor",actionArgs:{position:"top"}},{keys:"z<CR>",type:"action",action:"scrollToCursor",actionArgs:{position:"top"},motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:"z-",type:"action",action:"scrollToCursor",actionArgs:{position:"bottom"}},{keys:"zb",type:"action",action:"scrollToCursor",actionArgs:{position:"bottom"},motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:".",type:"action",action:"repeatLastEdit"},{keys:"<C-a>",type:"action",action:"incrementNumberToken",isEdit:!0,actionArgs:{increase:!0,backtrack:!1}},{keys:"<C-x>",type:"action",action:"incrementNumberToken",isEdit:!0,actionArgs:{increase:!1,backtrack:!1}},{keys:"a<character>",type:"motion",motion:"textObjectManipulation"},{keys:"i<character>",type:"motion",motion:"textObjectManipulation",motionArgs:{textObjectInner:!0}},{keys:"/",type:"search",searchArgs:{forward:!0,querySrc:"prompt",toJumplist:!0}},{keys:"?",type:"search",searchArgs:{forward:!1,querySrc:"prompt",toJumplist:!0}},{keys:"*",type:"search",searchArgs:{forward:!0,querySrc:"wordUnderCursor",wholeWordOnly:!0,toJumplist:!0}},{keys:"#",type:"search",searchArgs:{forward:!1,querySrc:"wordUnderCursor",wholeWordOnly:!0,toJumplist:!0}},{keys:"g*",type:"search",searchArgs:{forward:!0,querySrc:"wordUnderCursor",toJumplist:!0}},{keys:"g#",type:"search",searchArgs:{forward:!1,querySrc:"wordUnderCursor",toJumplist:!0}},{keys:":",type:"ex"}],sc=pc.Pos,tc=[16,17,18,91],uc={Enter:"CR",Backspace:"BS",Delete:"Del"},vc=/Mac/.test(navigator.platform),wc=function(){return Kc};pc.defineOption("vimMode",!1,function(a,b,c){b&&"vim"!=a.getOption("keyMap")?a.setOption("keyMap","vim"):!b&&c!=pc.Init&&/^vim/.test(a.getOption("keyMap"))&&a.setOption("keyMap","default")});var xc=/[\d]/,yc=[/\w/,/[^\w\s]/],zc=[/\S/],Ac=m(65,26),Bc=m(97,26),Cc=m(48,10),Dc=[].concat(Ac,Bc,Cc,["<",">"]),Ec=[].concat(Ac,Bc,Cc,["-",'"',".",":","/"]),Fc={},Gc=function(){function a(a,b,h){function i(b){var e=++d%c,f=g[e];f&&f.clear(),g[e]=a.setBookmark(b)}var j=d%c,k=g[j];if(k){var l=k.find();l&&!P(l,b)&&i(b)}else i(b);i(h),e=d,f=d-c+1,0>f&&(f=0)}function b(a,b){d+=b,d>e?d=e:f>d&&(d=f);var h=g[(c+d)%c];if(h&&!h.find()){var i,j=b>0?1:-1,k=a.getCursor();do if(d+=j,h=g[(c+d)%c],h&&(i=h.find())&&!P(k,i))break;while(e>d&&d>f)}return h}var c=100,d=-1,e=0,f=0,g=new Array(c);return{cachedCursor:void 0,add:a,move:b}},Hc=function(a){return a?{changes:a.changes,expectCursorActivityForChange:a.expectCursorActivityForChange}:{changes:[],expectCursorActivityForChange:!1}};x.prototype={exitMacroRecordMode:function(){var a=Ic.macroModeState;a.onRecordingDone&&a.onRecordingDone(),a.onRecordingDone=void 0,a.isRecording=!1},enterMacroRecordMode:function(a,b){var c=Ic.registerController.getRegister(b);c&&(c.clear(),this.latestRegister=b,a.openDialog&&(this.onRecordingDone=a.openDialog("(recording)["+b+"]",null,{bottom:!0})),this.isRecording=!0)}};var Ic,Jc,Kc={buildKeyMap:function(){},getRegisterController:function(){return Ic.registerController},resetVimGlobalState_:z,getVimGlobalState_:function(){return Ic},maybeInitVimState_:y,InsertModeKey:$b,map:function(a,b,c){Vc.map(a,b,c)},unmap:function(a,b){Vc.unmap(a,b)},setOption:v,getOption:w,defineOption:u,defineEx:function(a,b,c){if(0!==a.indexOf(b))throw new Error('(Vim.defineEx) "'+b+'" is not a prefix of "'+a+'", command not registered');Uc[a]=c,Vc.commandMap_[b]={name:a,shortName:b,type:"api"}},handleKey:function(a,b,c){function d(){var d=Ic.macroModeState;if(d.isRecording){if("q"==b)return d.exitMacroRecordMode(),B(a),!0;"mapping"!=c&&Tb(d,b)}}function e(){return"<Esc>"==b?(B(a),i.visualMode?gb(a):i.insertMode&&Rb(a),!0):void 0}function f(c){for(var d;c;)d=/<\w+-.+?>|<\w+>|./.exec(c),b=d[0],c=c.substring(d.index+b.length),pc.Vim.handleKey(a,b,"mapping")}function g(){if(e())return!0;for(var c=i.inputState.keyBuffer=i.inputState.keyBuffer+b,d=1==b.length,g=Lc.matchCommand(c,rc,i.inputState,"insert");c.length>1&&"full"!=g.type;){var c=i.inputState.keyBuffer=c.slice(1),h=Lc.matchCommand(c,rc,i.inputState,"insert");"none"!=h.type&&(g=h)}if("none"==g.type)return B(a),!1;if("partial"==g.type)return Jc&&window.clearTimeout(Jc),Jc=window.setTimeout(function(){i.insertMode&&i.inputState.keyBuffer&&B(a)},w("insertModeEscKeysTimeout")),!d;if(Jc&&window.clearTimeout(Jc),d){var j=a.getCursor();a.replaceRange("",I(j,0,-(c.length-1)),j,"+input")}B(a);var k=g.command;return"keyToKey"==k.type?f(k.toKeys):Lc.processCommand(a,i,k),!0}function h(){if(d()||e())return!0;var c=i.inputState.keyBuffer=i.inputState.keyBuffer+b;if(/^[1-9]\d*$/.test(c))return!0;var g=/^(\d*)(.*)$/.exec(c);if(!g)return B(a),!1;var h=i.visualMode?"visual":"normal",j=Lc.matchCommand(g[2]||g[1],rc,i.inputState,h);if("none"==j.type)return B(a),!1;if("partial"==j.type)return!0;i.inputState.keyBuffer="";var k=j.command,g=/^(\d*)(.*)$/.exec(c);return g[1]&&"0"!=g[1]&&i.inputState.pushRepeatDigit(g[1]),"keyToKey"==k.type?f(k.toKeys):Lc.processCommand(a,i,k),!0}var i=y(a);return a.operation(function(){a.curOp.isVimOp=!0;try{return i.insertMode?g():h()}catch(b){throw a.state.vim=void 0,y(a),b}})},handleEx:function(a,b){Vc.processCommand(a,b)}};A.prototype.pushRepeatDigit=function(a){this.operator?this.motionRepeat=this.motionRepeat.concat(a):this.prefixRepeat=this.prefixRepeat.concat(a)},A.prototype.getRepeat=function(){var a=0;return(this.prefixRepeat.length>0||this.motionRepeat.length>0)&&(a=1,this.prefixRepeat.length>0&&(a*=parseInt(this.prefixRepeat.join(""),10)),this.motionRepeat.length>0&&(a*=parseInt(this.motionRepeat.join(""),10))),a},C.prototype={setText:function(a,b,c){this.keyBuffer=[a||""],this.linewise=!!b,this.blockwise=!!c},pushText:function(a,b){b&&(this.linewise||this.keyBuffer.push("\n"),this.linewise=!0),this.keyBuffer.push(a)},pushInsertModeChanges:function(a){this.insertModeChanges.push(Hc(a))},pushSearchQuery:function(a){this.searchQueries.push(a)},clear:function(){this.keyBuffer=[],this.insertModeChanges=[],this.searchQueries=[],this.linewise=!1},toString:function(){return this.keyBuffer.join("")}},D.prototype={pushText:function(a,b,c,d,e){d&&"\n"==c.charAt(0)&&(c=c.slice(1)+"\n"),d&&"\n"!==c.charAt(c.length-1)&&(c+="\n");var f=this.isValidRegister(a)?this.getRegister(a):null;if(!f){switch(b){case"yank":this.registers[0]=new C(c,d,e);break;case"delete":case"change":-1==c.indexOf("\n")?this.registers["-"]=new C(c,d):(this.shiftNumericRegisters_(),this.registers[1]=new C(c,d))}return void this.unnamedRegister.setText(c,d,e)}var g=r(a);g?f.pushText(c,d):f.setText(c,d,e),this.unnamedRegister.setText(f.toString(),d)},getRegister:function(a){return this.isValidRegister(a)?(a=a.toLowerCase(),this.registers[a]||(this.registers[a]=new C),this.registers[a]):this.unnamedRegister},isValidRegister:function(a){return a&&t(a,Ec)},shiftNumericRegisters_:function(){for(var a=9;a>=2;a--)this.registers[a]=this.getRegister(""+(a-1))}},E.prototype={nextMatch:function(a,b){var c=this.historyBuffer,d=b?-1:1;null===this.initialPrefix&&(this.initialPrefix=a);for(var e=this.iterator+d;b?e>=0:e<c.length;e+=d)for(var f=c[e],g=0;g<=f.length;g++)if(this.initialPrefix==f.substring(0,g))return this.iterator=e,f;return e>=c.length?(this.iterator=c.length,this.initialPrefix):0>e?a:void 0},pushInput:function(a){var b=this.historyBuffer.indexOf(a);b>-1&&this.historyBuffer.splice(b,1),a.length&&this.historyBuffer.push(a)},reset:function(){this.initialPrefix=null,this.iterator=this.historyBuffer.length}};var Lc={matchCommand:function(a,b,c,d){var e=K(a,b,d,c);if(!e.full&&!e.partial)return{type:"none"};if(!e.full&&e.partial)return{type:"partial"};for(var f,g=0;g<e.full.length;g++){var h=e.full[g];f||(f=h)}return"<character>"==f.keys.slice(-11)&&(c.selectedCharacter=M(a)),{type:"full",command:f}},processCommand:function(a,b,c){switch(b.inputState.repeatOverride=c.repeatOverride,c.type){case"motion":this.processMotion(a,b,c);break;case"operator":this.processOperator(a,b,c);break;case"operatorMotion":this.processOperatorMotion(a,b,c);break;case"action":this.processAction(a,b,c);break;case"search":this.processSearch(a,b,c),B(a);break;case"ex":case"keyToEx":this.processEx(a,b,c),B(a)}},processMotion:function(a,b,c){b.inputState.motion=c.motion,b.inputState.motionArgs=H(c.motionArgs),this.evalInput(a,b)},processOperator:function(a,b,c){var d=b.inputState;if(d.operator){if(d.operator==c.operator)return d.motion="expandToLine",d.motionArgs={linewise:!0},void this.evalInput(a,b);B(a)}d.operator=c.operator,d.operatorArgs=H(c.operatorArgs),b.visualMode&&this.evalInput(a,b)},processOperatorMotion:function(a,b,c){var d=b.visualMode,e=H(c.operatorMotionArgs);e&&d&&e.visualLine&&(b.visualLine=!0),this.processOperator(a,b,c),d||this.processMotion(a,b,c)},processAction:function(a,b,c){var d=b.inputState,e=d.getRepeat(),f=!!e,g=H(c.actionArgs)||{};d.selectedCharacter&&(g.selectedCharacter=d.selectedCharacter),c.operator&&this.processOperator(a,b,c),c.motion&&this.processMotion(a,b,c),(c.motion||c.operator)&&this.evalInput(a,b),g.repeat=e||1,g.repeatIsExplicit=f,g.registerName=d.registerName,B(a),b.lastMotion=null,c.isEdit&&this.recordLastEdit(b,d,c),Oc[c.action](a,g,b)},processSearch:function(a,b,c){function d(d,e,f){Ic.searchHistoryController.pushInput(d),Ic.searchHistoryController.reset();try{Jb(a,d,e,f)}catch(g){return void Fb(a,"Invalid regex: "+d)}Lc.processMotion(a,b,{type:"motion",motion:"findNext",motionArgs:{forward:!0,toJumplist:c.searchArgs.toJumplist}})}function e(b){a.scrollTo(l.left,l.top),d(b,!0,!0);var c=Ic.macroModeState;c.isRecording&&Vb(c,b)}function f(b,c,d){var e,f=pc.keyName(b);"Up"==f||"Down"==f?(e="Up"==f?!0:!1,c=Ic.searchHistoryController.nextMatch(c,e)||"",d(c)):"Left"!=f&&"Right"!=f&&"Ctrl"!=f&&"Alt"!=f&&"Shift"!=f&&Ic.searchHistoryController.reset();var g;try{g=Jb(a,c,!0,!0)}catch(b){}g?a.scrollIntoView(Mb(a,!h,g),30):(Nb(a),a.scrollTo(l.left,l.top))}function g(b,c,d){var e=pc.keyName(b);("Esc"==e||"Ctrl-C"==e||"Ctrl-["==e)&&(Ic.searchHistoryController.pushInput(c),Ic.searchHistoryController.reset(),Jb(a,k),Nb(a),a.scrollTo(l.left,l.top),pc.e_stop(b),d(),a.focus())}if(a.getSearchCursor){var h=c.searchArgs.forward,i=c.searchArgs.wholeWordOnly;xb(a).setReversed(!h);var j=h?"/":"?",k=xb(a).getQuery(),l=a.getScrollInfo();switch(c.searchArgs.querySrc){case"prompt":var m=Ic.macroModeState;if(m.isPlaying){var n=m.replaySearchQueries.shift();d(n,!0,!1)}else Hb(a,{onClose:e,prefix:j,desc:Rc,onKeyUp:f,onKeyDown:g});break;case"wordUnderCursor":var o=kb(a,!1,!0,!1,!0),p=!0;if(o||(o=kb(a,!1,!0,!1,!1),p=!1),!o)return;var n=a.getLine(o.start.line).substring(o.start.ch,o.end.ch);n=p&&i?"\\b"+n+"\\b":X(n),Ic.jumpList.cachedCursor=a.getCursor(),a.setCursor(o.start),d(n,!0,!1)}}},processEx:function(a,b,c){function d(b){Ic.exCommandHistoryController.pushInput(b),Ic.exCommandHistoryController.reset(),Vc.processCommand(a,b)}function e(b,c,d){var e,f=pc.keyName(b);("Esc"==f||"Ctrl-C"==f||"Ctrl-["==f)&&(Ic.exCommandHistoryController.pushInput(c),Ic.exCommandHistoryController.reset(),pc.e_stop(b),d(),a.focus()),"Up"==f||"Down"==f?(e="Up"==f?!0:!1,c=Ic.exCommandHistoryController.nextMatch(c,e)||"",d(c)):"Left"!=f&&"Right"!=f&&"Ctrl"!=f&&"Alt"!=f&&"Shift"!=f&&Ic.exCommandHistoryController.reset()}"keyToEx"==c.type?Vc.processCommand(a,c.exArgs.input):b.visualMode?Hb(a,{onClose:d,prefix:":",value:"'<,'>",onKeyDown:e}):Hb(a,{onClose:d,prefix:":",onKeyDown:e})},evalInput:function(a,b){var c,d,e,f=b.inputState,g=f.motion,h=f.motionArgs||{},i=f.operator,j=f.operatorArgs||{},k=f.registerName,l=b.sel,m=O(b.visualMode?l.head:a.getCursor("head")),n=O(b.visualMode?l.anchor:a.getCursor("anchor")),o=O(m),p=O(n);if(i&&this.recordLastEdit(b,f),e=void 0!==f.repeatOverride?f.repeatOverride:f.getRepeat(),e>0&&h.explicitRepeat?h.repeatIsExplicit=!0:(h.noRepeat||!h.explicitRepeat&&0===e)&&(e=1,h.repeatIsExplicit=!1),f.selectedCharacter&&(h.selectedCharacter=j.selectedCharacter=f.selectedCharacter),h.repeat=e,B(a),g){var q=Mc[g](a,m,h,b);if(b.lastMotion=Mc[g],!q)return;if(h.toJumplist){var r=Ic.jumpList,s=r.cachedCursor;s?(lb(a,s,q),delete r.cachedCursor):lb(a,m,q)}q instanceof Array?(d=q[0],c=q[1]):c=q,c||(c=O(m)),b.visualMode?(c=G(a,c,!0),d&&(d=G(a,d,!0)),d=d||p,l.anchor=d,l.head=c,db(a),sb(a,b,"<",Q(d,c)?d:c),sb(a,b,">",Q(d,c)?c:d)):i||(c=G(a,c),a.setCursor(c.line,c.ch))}if(i){if(j.lastSel){d=p;var t=j.lastSel,u=Math.abs(t.head.line-t.anchor.line),v=Math.abs(t.head.ch-t.anchor.ch);c=t.visualLine?sc(p.line+u,p.ch):t.visualBlock?sc(p.line+u,p.ch+v):t.head.line==t.anchor.line?sc(p.line,p.ch+v):sc(p.line+u,p.ch),b.visualMode=!0,b.visualLine=t.visualLine,b.visualBlock=t.visualBlock,l=b.sel={anchor:d,head:c},db(a)}else b.visualMode&&(j.lastSel={anchor:O(l.anchor),head:O(l.head),visualBlock:b.visualBlock,visualLine:b.visualLine});var w,x,y,z,A;if(b.visualMode){if(w=R(l.head,l.anchor),x=S(l.head,l.anchor),y=b.visualLine||j.linewise,z=b.visualBlock?"block":y?"line":"char",A=eb(a,{anchor:w,head:x},z),y){var C=A.ranges;if("block"==z)for(var D=0;D<C.length;D++)C[D].head.ch=U(a,C[D].head.line);else"line"==z&&(C[0].head=sc(C[0].head.line+1,0))}}else{if(w=O(d||p),x=O(c||o),Q(x,w)){var E=w;w=x,x=E}y=h.linewise||j.linewise,y?ib(a,w,x):h.forward&&hb(a,w,x),z="char";var F=!h.inclusive||y;A=eb(a,{anchor:w,head:x},z,F)}a.setSelections(A.ranges,A.primary),b.lastMotion=null,j.repeat=e,j.registerName=k,j.linewise=y;var H=Nc[i](a,j,A.ranges,p,c);b.visualMode&&gb(a),H&&a.setCursor(H)}},recordLastEdit:function(a,b,c){var d=Ic.macroModeState;d.isPlaying||(a.lastEditInputState=b,a.lastEditActionCommand=c,d.lastInsertModeChanges.changes=[],d.lastInsertModeChanges.expectCursorActivityForChange=!1)}},Mc={moveToTopLine:function(a,b,c){var d=Pb(a).top+c.repeat-1;return sc(d,jb(a.getLine(d)))},moveToMiddleLine:function(a){var b=Pb(a),c=Math.floor(.5*(b.top+b.bottom));return sc(c,jb(a.getLine(c)))},moveToBottomLine:function(a,b,c){var d=Pb(a).bottom-c.repeat+1;return sc(d,jb(a.getLine(d)))},expandToLine:function(a,b,c){var d=b;return sc(d.line+c.repeat-1,1/0)},findNext:function(a,b,c){var d=xb(a),e=d.getQuery();if(e){var f=!c.forward;return f=d.isReversed()?!f:f,Lb(a,e),Mb(a,f,e,c.repeat)}},goToMark:function(a,b,c,d){var e=d.marks[c.selectedCharacter];if(e){var f=e.find();return c.linewise?{line:f.line,ch:jb(a.getLine(f.line))}:f}return null},moveToOtherHighlightedEnd:function(a,b,c,d){if(d.visualBlock&&c.sameLine){var e=d.sel;return[G(a,sc(e.anchor.line,e.head.ch)),G(a,sc(e.head.line,e.anchor.ch))]}return[d.sel.head,d.sel.anchor]},jumpToMark:function(a,b,c,d){for(var e=b,f=0;f<c.repeat;f++){var g=e;for(var h in d.marks)if(o(h)){var i=d.marks[h].find(),j=c.forward?Q(i,g):Q(g,i);if(!(j||c.linewise&&i.line==g.line)){var k=P(g,e),l=c.forward?T(g,i,e):T(e,i,g);(k||l)&&(e=i)}}}return c.linewise&&(e=sc(e.line,jb(a.getLine(e.line)))),e},moveByCharacters:function(a,b,c){var d=b,e=c.repeat,f=c.forward?d.ch+e:d.ch-e;return sc(d.line,f)},moveByLines:function(a,b,c,d){var e=b,f=e.ch;switch(d.lastMotion){case this.moveByLines:case this.moveByDisplayLines:case this.moveByScroll:case this.moveToColumn:case this.moveToEol:f=d.lastHPos;break;default:d.lastHPos=f}var g=c.repeat+(c.repeatOffset||0),h=c.forward?e.line+g:e.line-g,i=a.firstLine(),j=a.lastLine();return i>h&&e.line==i||h>j&&e.line==j?void 0:(c.toFirstChar&&(f=jb(a.getLine(h)),d.lastHPos=f),d.lastHSPos=a.charCoords(sc(h,f),"div").left,sc(h,f))},moveByDisplayLines:function(a,b,c,d){var e=b;switch(d.lastMotion){case this.moveByDisplayLines:case this.moveByScroll:case this.moveByLines:case this.moveToColumn:case this.moveToEol:break;default:d.lastHSPos=a.charCoords(e,"div").left}var f=c.repeat,g=a.findPosV(e,c.forward?f:-f,"line",d.lastHSPos);if(g.hitSide)if(c.forward)var h=a.charCoords(g,"div"),i={top:h.top+8,left:d.lastHSPos},g=a.coordsChar(i,"div");else{var j=a.charCoords(sc(a.firstLine(),0),"div");j.left=d.lastHSPos,g=a.coordsChar(j,"div")}return d.lastHPos=g.ch,g},moveByPage:function(a,b,c){var d=b,e=c.repeat;return a.findPosV(d,c.forward?e:-e,"page")},moveByParagraph:function(a,b,c){for(var d=b.line,e=c.repeat,f=c.forward?1:-1,g=0;e>g&&!(!c.forward&&d===a.firstLine()||c.forward&&d==a.lastLine());g++)for(d+=f;d!==a.firstLine()&&d!=a.lastLine()&&a.getLine(d);)d+=f;
return sc(d,0)},moveByScroll:function(a,b,c,d){var e=a.getScrollInfo(),f=null,g=c.repeat;g||(g=e.clientHeight/(2*a.defaultTextHeight()));var h=a.charCoords(b,"local");c.repeat=g;var f=Mc.moveByDisplayLines(a,b,c,d);if(!f)return null;var i=a.charCoords(f,"local");return a.scrollTo(null,e.top+i.top-h.top),f},moveByWords:function(a,b,c){return pb(a,b,c.repeat,!!c.forward,!!c.wordEnd,!!c.bigWord)},moveTillCharacter:function(a,b,c){var d=c.repeat,e=qb(a,d,c.forward,c.selectedCharacter),f=c.forward?-1:1;return mb(f,c),e?(e.ch+=f,e):null},moveToCharacter:function(a,b,c){var d=c.repeat;return mb(0,c),qb(a,d,c.forward,c.selectedCharacter)||b},moveToSymbol:function(a,b,c){var d=c.repeat;return nb(a,d,c.forward,c.selectedCharacter)||b},moveToColumn:function(a,b,c,d){var e=c.repeat;return d.lastHPos=e-1,d.lastHSPos=a.charCoords(b,"div").left,rb(a,e)},moveToEol:function(a,b,c,d){var e=b;d.lastHPos=1/0;var f=sc(e.line+c.repeat-1,1/0),g=a.clipPos(f);return g.ch--,d.lastHSPos=a.charCoords(g,"div").left,f},moveToFirstNonWhiteSpaceCharacter:function(a,b){var c=b;return sc(c.line,jb(a.getLine(c.line)))},moveToMatchedSymbol:function(a,b){var c,d=b,e=d.line,f=d.ch,g=a.getLine(e);do if(c=g.charAt(f++),c&&p(c)){var h=a.getTokenTypeAt(sc(e,f));if("string"!==h&&"comment"!==h)break}while(c);if(c){var i=a.findMatchingBracket(sc(e,f));return i.to}return d},moveToStartOfLine:function(a,b){return sc(b.line,0)},moveToLineOrEdgeOfDocument:function(a,b,c){var d=c.forward?a.lastLine():a.firstLine();return c.repeatIsExplicit&&(d=c.repeat-a.getOption("firstLineNumber")),sc(d,jb(a.getLine(d)))},textObjectManipulation:function(a,b,c){var d={"(":")",")":"(","{":"}","}":"{","[":"]","]":"["},e={"'":!0,'"':!0},f=c.selectedCharacter;"b"==f?f="(":"B"==f&&(f="{");var g,h=!c.textObjectInner;if(d[f])g=ub(a,b,f,h);else if(e[f])g=vb(a,b,f,h);else if("W"===f)g=kb(a,h,!0,!0);else if("w"===f)g=kb(a,h,!0,!1);else{if("p"!==f)return null;g=expandParagraphUnderCursor(a,h,!0,!1)}return a.state.vim.visualMode?cb(a,g.start,g.end):[g.start,g.end]},repeatLastCharacterSearch:function(a,b,c){var d=Ic.lastChararacterSearch,e=c.repeat,f=c.forward===d.forward,g=(d.increment?1:0)*(f?-1:1);a.moveH(-g,"char"),c.inclusive=f?!0:!1;var h=qb(a,e,f,d.selectedCharacter);return h?(h.ch+=g,h):(a.moveH(g,"char"),b)}},Nc={change:function(a,b,c){var d,e,f=a.state.vim;if(Ic.macroModeState.lastInsertModeChanges.inVisualBlock=f.visualBlock,f.visualMode){e=a.getSelection();var g=F("",c.length);a.replaceSelections(g),d=R(c[0].head,c[0].anchor)}else{var h=c[0].anchor,i=c[0].head;if(e=a.getRange(h,i),!s(e)){var j=/\s+$/.exec(e);j&&(i=I(i,0,-j[0].length),e=e.slice(0,-j[0].length))}var k=i.line-1==a.lastLine();a.replaceRange("",h,i),b.linewise&&!k&&(pc.commands.newlineAndIndent(a),h.ch=null),d=h}Ic.registerController.pushText(b.registerName,"change",e,b.linewise,c.length>1),Oc.enterInsertMode(a,{head:d},a.state.vim)},"delete":function(a,b,c){var d,e,f=a.state.vim;if(f.visualBlock){e=a.getSelection();var g=F("",c.length);a.replaceSelections(g),d=c[0].anchor}else{var h=c[0].anchor,i=c[0].head;b.linewise&&i.line!=a.firstLine()&&h.line==a.lastLine()&&h.line==i.line-1&&(h.line==a.firstLine()?h.ch=0:h=sc(h.line-1,U(a,h.line-1))),e=a.getRange(h,i),a.replaceRange("",h,i),d=h,b.linewise&&(d=Mc.moveToFirstNonWhiteSpaceCharacter(a,h))}return Ic.registerController.pushText(b.registerName,"delete",e,b.linewise,f.visualBlock),d},indent:function(a,b,c){var d=a.state.vim,e=c[0].anchor.line,f=d.visualBlock?c[c.length-1].anchor.line:c[0].head.line,g=d.visualMode?b.repeat:1;b.linewise&&f--;for(var h=e;f>=h;h++)for(var i=0;g>i;i++)a.indentLine(h,b.indentRight);return Mc.moveToFirstNonWhiteSpaceCharacter(a,c[0].anchor)},changeCase:function(a,b,c,d,e){for(var f=a.getSelections(),g=[],h=b.toLower,i=0;i<f.length;i++){var j=f[i],k="";if(h===!0)k=j.toLowerCase();else if(h===!1)k=j.toUpperCase();else for(var l=0;l<j.length;l++){var m=j.charAt(l);k+=r(m)?m.toLowerCase():m.toUpperCase()}g.push(k)}return a.replaceSelections(g),b.shouldMoveCursor?e:!a.state.vim.visualMode&&b.linewise&&c[0].anchor.line+1==c[0].head.line?Mc.moveToFirstNonWhiteSpaceCharacter(a,d):b.linewise?d:R(c[0].anchor,c[0].head)},yank:function(a,b,c,d){var e=a.state.vim,f=a.getSelection(),g=e.visualMode?R(e.sel.anchor,e.sel.head,c[0].head,c[0].anchor):d;return Ic.registerController.pushText(b.registerName,"yank",f,b.linewise,e.visualBlock),g}},Oc={jumpListWalk:function(a,b,c){if(!c.visualMode){var d=b.repeat,e=b.forward,f=Ic.jumpList,g=f.move(a,e?d:-d),h=g?g.find():void 0;h=h?h:a.getCursor(),a.setCursor(h)}},scroll:function(a,b,c){if(!c.visualMode){var d=b.repeat||1,e=a.defaultTextHeight(),f=a.getScrollInfo().top,g=e*d,h=b.forward?f+g:f-g,i=O(a.getCursor()),j=a.charCoords(i,"local");if(b.forward)h>j.top?(i.line+=(h-j.top)/e,i.line=Math.ceil(i.line),a.setCursor(i),j=a.charCoords(i,"local"),a.scrollTo(null,j.top)):a.scrollTo(null,h);else{var k=h+a.getScrollInfo().clientHeight;k<j.bottom?(i.line-=(j.bottom-k)/e,i.line=Math.floor(i.line),a.setCursor(i),j=a.charCoords(i,"local"),a.scrollTo(null,j.bottom-a.getScrollInfo().clientHeight)):a.scrollTo(null,h)}}},scrollToCursor:function(a,b){var c=a.getCursor().line,d=a.charCoords(sc(c,0),"local"),e=a.getScrollInfo().clientHeight,f=d.top,g=d.bottom-f;switch(b.position){case"center":f=f-e/2+g;break;case"bottom":f=f-e+1.4*g;break;case"top":f+=.4*g}a.scrollTo(null,f)},replayMacro:function(a,b,c){var d=b.selectedCharacter,e=b.repeat,f=Ic.macroModeState;for("@"==d&&(d=f.latestRegister);e--;)Sb(a,c,f,d)},enterMacroRecordMode:function(a,b){var c=Ic.macroModeState,d=b.selectedCharacter;c.enterMacroRecordMode(a,d)},enterInsertMode:function(a,b,c){if(!a.getOption("readOnly")){c.insertMode=!0,c.insertModeRepeat=b&&b.repeat||1;var d=b?b.insertAt:null,e=c.sel,f=b.head||a.getCursor("head"),g=a.listSelections().length;if("eol"==d)f=sc(f.line,U(a,f.line));else if("charAfter"==d)f=I(f,0,1);else if("firstNonBlank"==d)f=Mc.moveToFirstNonWhiteSpaceCharacter(a,f);else if("startOfSelectedArea"==d)c.visualBlock?(f=sc(Math.min(e.head.line,e.anchor.line),Math.min(e.head.ch,e.anchor.ch)),g=Math.abs(e.head.line-e.anchor.line)+1):f=e.head.line<e.anchor.line?e.head:sc(e.anchor.line,0);else if("endOfSelectedArea"==d)c.visualBlock?(f=sc(Math.min(e.head.line,e.anchor.line),Math.max(e.head.ch+1,e.anchor.ch)),g=Math.abs(e.head.line-e.anchor.line)+1):f=e.head.line>=e.anchor.line?I(e.head,0,1):sc(e.anchor.line,0);else if("inplace"==d&&c.visualMode)return;a.setOption("keyMap","vim-insert"),a.setOption("disableInput",!1),b&&b.replace?(a.toggleOverwrite(!0),a.setOption("keyMap","vim-replace"),pc.signal(a,"vim-mode-change",{mode:"replace"})):(a.setOption("keyMap","vim-insert"),pc.signal(a,"vim-mode-change",{mode:"insert"})),Ic.macroModeState.isPlaying||(a.on("change",Wb),pc.on(a.getInputField(),"keydown",_b)),c.visualMode&&gb(a),$(a,f,g)}},toggleVisualMode:function(a,b,c){var d,e=b.repeat,f=a.getCursor();c.visualMode?c.visualLine^b.linewise||c.visualBlock^b.blockwise?(c.visualLine=!!b.linewise,c.visualBlock=!!b.blockwise,pc.signal(a,"vim-mode-change",{mode:"visual",subMode:c.visualLine?"linewise":c.visualBlock?"blockwise":""}),db(a)):gb(a):(c.visualMode=!0,c.visualLine=!!b.linewise,c.visualBlock=!!b.blockwise,d=G(a,sc(f.line,f.ch+e-1),!0),c.sel={anchor:f,head:d},pc.signal(a,"vim-mode-change",{mode:"visual",subMode:c.visualLine?"linewise":c.visualBlock?"blockwise":""}),db(a),sb(a,c,"<",R(f,d)),sb(a,c,">",S(f,d)))},reselectLastSelection:function(a,b,c){var d=c.lastSelection;if(c.visualMode&&bb(a,c),d){var e=d.anchorMark.find(),f=d.headMark.find();if(!e||!f)return;c.sel={anchor:e,head:f},c.visualMode=!0,c.visualLine=d.visualLine,c.visualBlock=d.visualBlock,db(a),sb(a,c,"<",R(e,f)),sb(a,c,">",S(e,f)),pc.signal(a,"vim-mode-change",{mode:"visual",subMode:c.visualLine?"linewise":c.visualBlock?"blockwise":""})}},joinLines:function(a,b,c){var d,e;if(c.visualMode)d=a.getCursor("anchor"),e=a.getCursor("head"),e.ch=U(a,e.line)-1;else{var f=Math.max(b.repeat,2);d=a.getCursor(),e=G(a,sc(d.line+f-1,1/0))}for(var g=0,h=d.line;h<e.line;h++){g=U(a,d.line);var i=sc(d.line+1,U(a,d.line+1)),j=a.getRange(d,i);j=j.replace(/\n\s*/g," "),a.replaceRange(j,d,i)}var k=sc(d.line,g);a.setCursor(k),c.visualMode&&gb(a)},newLineAndEnterInsertMode:function(a,b,c){c.insertMode=!0;var d=O(a.getCursor());if(d.line!==a.firstLine()||b.after){d.line=b.after?d.line:d.line-1,d.ch=U(a,d.line),a.setCursor(d);var e=pc.commands.newlineAndIndentContinueComment||pc.commands.newlineAndIndent;e(a)}else a.replaceRange("\n",sc(a.firstLine(),0)),a.setCursor(a.firstLine(),0);this.enterInsertMode(a,{repeat:b.repeat},c)},paste:function(a,b,c){var d=O(a.getCursor()),e=Ic.registerController.getRegister(b.registerName),f=e.toString();if(f){if(b.matchIndent){var g=a.getOption("tabSize"),h=function(a){var b=a.split("	").length-1,c=a.split(" ").length-1;return b*g+1*c},i=a.getLine(a.getCursor().line),j=h(i.match(/^\s*/)[0]),k=f.replace(/\n$/,""),l=f!==k,m=h(f.match(/^\s*/)[0]),f=k.replace(/^\s*/gm,function(b){var c=j+(h(b)-m);if(0>c)return"";if(a.getOption("indentWithTabs")){var d=Math.floor(c/g);return Array(d+1).join("	")}return Array(c+1).join(" ")});f+=l?"\n":""}if(b.repeat>1)var f=Array(b.repeat+1).join(f);var n=e.linewise,o=e.blockwise;if(n)c.visualMode?f=c.visualLine?f.slice(0,-1):"\n"+f.slice(0,f.length-1)+"\n":b.after?(f="\n"+f.slice(0,f.length-1),d.ch=U(a,d.line)):d.ch=0;else{if(o){f=f.split("\n");for(var p=0;p<f.length;p++)f[p]=""==f[p]?" ":f[p]}d.ch+=b.after?1:0}var q,r;if(c.visualMode){c.lastPastedText=f;var s,t=ab(a,c),u=t[0],v=t[1],w=a.getSelection(),x=a.listSelections(),y=new Array(x.length).join("1").split("1");c.lastSelection&&(s=c.lastSelection.headMark.find()),Ic.registerController.unnamedRegister.setText(w),o?(a.replaceSelections(y),v=sc(u.line+f.length-1,u.ch),a.setCursor(u),Z(a,v),a.replaceSelections(f),q=u):c.visualBlock?(a.replaceSelections(y),a.setCursor(u),a.replaceRange(f,u,u),q=u):(a.replaceRange(f,u,v),q=a.posFromIndex(a.indexFromPos(u)+f.length-1)),s&&(c.lastSelection.headMark=a.setBookmark(s)),n&&(q.ch=0)}else if(o){a.setCursor(d);for(var p=0;p<f.length;p++){var z=d.line+p;z>a.lastLine()&&a.replaceRange("\n",sc(z,0));var A=U(a,z);A<d.ch&&Y(a,z,d.ch)}a.setCursor(d),Z(a,sc(d.line+f.length-1,d.ch)),a.replaceSelections(f),q=d}else a.replaceRange(f,d),n&&b.after?q=sc(d.line+1,jb(a.getLine(d.line+1))):n&&!b.after?q=sc(d.line,jb(a.getLine(d.line))):!n&&b.after?(r=a.indexFromPos(d),q=a.posFromIndex(r+f.length-1)):(r=a.indexFromPos(d),q=a.posFromIndex(r+f.length));c.visualMode&&gb(a),a.setCursor(q)}},undo:function(a,b){a.operation(function(){N(a,pc.commands.undo,b.repeat)(),a.setCursor(a.getCursor("anchor"))})},redo:function(a,b){N(a,pc.commands.redo,b.repeat)()},setRegister:function(a,b,c){c.inputState.registerName=b.selectedCharacter},setMark:function(a,b,c){var d=b.selectedCharacter;sb(a,c,d,a.getCursor())},replace:function(a,b,c){var d,e,f=b.selectedCharacter,g=a.getCursor(),h=a.listSelections();if(c.visualMode)g=a.getCursor("start"),e=a.getCursor("end");else{var i=a.getLine(g.line);d=g.ch+b.repeat,d>i.length&&(d=i.length),e=sc(g.line,d)}if("\n"==f)c.visualMode||a.replaceRange("",g,e),(pc.commands.newlineAndIndentContinueComment||pc.commands.newlineAndIndent)(a);else{var j=a.getRange(g,e);if(j=j.replace(/[^\n]/g,f),c.visualBlock){var k=new Array(a.getOption("tabSize")+1).join(" ");j=a.getSelection(),j=j.replace(/\t/g,k).replace(/[^\n]/g,f).split("\n"),a.replaceSelections(j)}else a.replaceRange(j,g,e);c.visualMode?(g=Q(h[0].anchor,h[0].head)?h[0].anchor:h[0].head,a.setCursor(g),gb(a)):a.setCursor(I(e,0,-1))}},incrementNumberToken:function(a,b){for(var c,d,e,f,g,h=a.getCursor(),i=a.getLine(h.line),j=/-?\d+/g;null!==(c=j.exec(i))&&(g=c[0],d=c.index,e=d+g.length,!(h.ch<e)););if((b.backtrack||!(e<=h.ch))&&g){var k=b.increase?1:-1,l=parseInt(g)+k*b.repeat,m=sc(h.line,d),n=sc(h.line,e);f=l.toString(),a.replaceRange(f,m,n),a.setCursor(sc(h.line,d+f.length-1))}},repeatLastEdit:function(a,b,c){var d=c.lastEditInputState;if(d){var e=b.repeat;e&&b.repeatIsExplicit?c.lastEditInputState.repeatOverride=e:e=c.lastEditInputState.repeatOverride||e,ac(a,c,e,!1)}},exitInsertMode:Rb},Pc={"(":"bracket",")":"bracket","{":"bracket","}":"bracket","[":"section","]":"section","*":"comment","/":"comment",m:"method",M:"method","#":"preprocess"},Qc={bracket:{isComplete:function(a){if(a.nextCh===a.symb){if(a.depth++,a.depth>=1)return!0}else a.nextCh===a.reverseSymb&&a.depth--;return!1}},section:{init:function(a){a.curMoveThrough=!0,a.symb=(a.forward?"]":"[")===a.symb?"{":"}"},isComplete:function(a){return 0===a.index&&a.nextCh===a.symb}},comment:{isComplete:function(a){var b="*"===a.lastCh&&"/"===a.nextCh;return a.lastCh=a.nextCh,b}},method:{init:function(a){a.symb="m"===a.symb?"{":"}",a.reverseSymb="{"===a.symb?"}":"{"},isComplete:function(a){return a.nextCh===a.symb?!0:!1}},preprocess:{init:function(a){a.index=0},isComplete:function(a){if("#"===a.nextCh){var b=a.lineText.match(/#(\w+)/)[1];if("endif"===b){if(a.forward&&0===a.depth)return!0;a.depth++}else if("if"===b){if(!a.forward&&0===a.depth)return!0;a.depth--}if("else"===b&&0===a.depth)return!0}return!1}}};u("pcre",!0,"boolean"),wb.prototype={getQuery:function(){return Ic.query},setQuery:function(a){Ic.query=a},getOverlay:function(){return this.searchOverlay},setOverlay:function(a){this.searchOverlay=a},isReversed:function(){return Ic.isReversed},setReversed:function(a){Ic.isReversed=a}};var Rc="(Javascript regexp)",Sc=[{name:"map"},{name:"imap",shortName:"im"},{name:"nmap",shortName:"nm"},{name:"vmap",shortName:"vm"},{name:"unmap"},{name:"write",shortName:"w"},{name:"undo",shortName:"u"},{name:"redo",shortName:"red"},{name:"set",shortName:"set"},{name:"sort",shortName:"sor"},{name:"substitute",shortName:"s",possiblyAsync:!0},{name:"nohlsearch",shortName:"noh"},{name:"delmarks",shortName:"delm"},{name:"registers",shortName:"reg",excludeFromCommandHistory:!0},{name:"global",shortName:"g"}],Tc=function(){this.buildCommandMap_()};Tc.prototype={processCommand:function(a,b,c){var d=a.state.vim,e=Ic.registerController.getRegister(":"),f=e.toString();d.visualMode&&gb(a);var g=new pc.StringStream(b);e.setText(b);var h=c||{};h.input=b;try{this.parseInput_(a,g,h)}catch(i){throw Fb(a,i),i}var j,k;if(h.commandName){if(j=this.matchCommand_(h.commandName)){if(k=j.name,j.excludeFromCommandHistory&&e.setText(f),this.parseCommandArgs_(g,h,j),"exToKey"==j.type){for(var l=0;l<j.toKeys.length;l++)pc.Vim.handleKey(a,j.toKeys[l],"mapping");return}if("exToEx"==j.type)return void this.processCommand(a,j.toInput)}}else void 0!==h.line&&(k="move");if(!k)return void Fb(a,'Not an editor command ":'+b+'"');try{Uc[k](a,h),j&&j.possiblyAsync||!h.callback||h.callback()}catch(i){throw Fb(a,i),i}},parseInput_:function(a,b,c){b.eatWhile(":"),b.eat("%")?(c.line=a.firstLine(),c.lineEnd=a.lastLine()):(c.line=this.parseLineSpec_(a,b),void 0!==c.line&&b.eat(",")&&(c.lineEnd=this.parseLineSpec_(a,b)));var d=b.match(/^(\w+)/);return c.commandName=d?d[1]:b.match(/.*/)[0],c},parseLineSpec_:function(a,b){var c=b.match(/^(\d+)/);if(c)return parseInt(c[1],10)-1;switch(b.next()){case".":return a.getCursor().line;case"$":return a.lastLine();case"'":var d=a.state.vim.marks[b.next()];if(d&&d.find())return d.find().line;throw new Error("Mark not set");default:return void b.backUp(1)}},parseCommandArgs_:function(a,b,c){if(!a.eol()){b.argString=a.match(/.*/)[0];var d=c.argDelimiter||/\s+/,e=W(b.argString).split(d);e.length&&e[0]&&(b.args=e)}},matchCommand_:function(a){for(var b=a.length;b>0;b--){var c=a.substring(0,b);if(this.commandMap_[c]){var d=this.commandMap_[c];if(0===d.name.indexOf(a))return d}}return null},buildCommandMap_:function(){this.commandMap_={};for(var a=0;a<Sc.length;a++){var b=Sc[a],c=b.shortName||b.name;this.commandMap_[c]=b}},map:function(a,b,c){if(":"!=a&&":"==a.charAt(0)){if(c)throw Error("Mode not supported for ex mappings");var d=a.substring(1);this.commandMap_[d]=":"!=b&&":"==b.charAt(0)?{name:d,type:"exToEx",toInput:b.substring(1),user:!0}:{name:d,type:"exToKey",toKeys:b,user:!0}}else if(":"!=b&&":"==b.charAt(0)){var e={keys:a,type:"keyToEx",exArgs:{input:b.substring(1)},user:!0};c&&(e.context=c),rc.unshift(e)}else{var e={keys:a,type:"keyToKey",toKeys:b,user:!0};c&&(e.context=c),rc.unshift(e)}},unmap:function(a,b){if(":"!=a&&":"==a.charAt(0)){if(b)throw Error("Mode not supported for ex mappings");var c=a.substring(1);if(this.commandMap_[c]&&this.commandMap_[c].user)return void delete this.commandMap_[c]}else for(var d=a,e=0;e<rc.length;e++)if(d==rc[e].keys&&rc[e].context===b&&rc[e].user)return void rc.splice(e,1);throw Error("No such mapping.")}};var Uc={map:function(a,b,c){var d=b.args;return!d||d.length<2?void(a&&Fb(a,"Invalid mapping: "+b.input)):void Vc.map(d[0],d[1],c)},imap:function(a,b){this.map(a,b,"insert")},nmap:function(a,b){this.map(a,b,"normal")},vmap:function(a,b){this.map(a,b,"visual")},unmap:function(a,b,c){var d=b.args;return!d||d.length<1?void(a&&Fb(a,"No such mapping: "+b.input)):void Vc.unmap(d[0],c)},move:function(a,b){Lc.processCommand(a,a.state.vim,{type:"motion",motion:"moveToLineOrEdgeOfDocument",motionArgs:{forward:!1,explicitRepeat:!0,linewise:!0},repeatOverride:b.line+1})},set:function(a,b){var c=b.args;if(!c||c.length<1)return void(a&&Fb(a,"Invalid mapping: "+b.input));var d=c[0].split("="),e=d[0],f=d[1],g=!1;if("?"==e.charAt(e.length-1)){if(f)throw Error("Trailing characters: "+b.argString);e=e.substring(0,e.length-1),g=!0}void 0===f&&"no"==e.substring(0,2)&&(e=e.substring(2),f=!1);var h=Fc[e]&&"boolean"==Fc[e].type;if(h&&void 0==f&&(f=!0),!h&&!f||g){var i=w(e);i===!0||i===!1?Fb(a," "+(i?"":"no")+e):Fb(a,"  "+e+"="+i)}else v(e,f,a)},registers:function(a,b){var c=b.args,d=Ic.registerController.registers,e="----------Registers----------<br><br>";if(c){var f;c=c.join("");for(var g=0;g<c.length;g++)if(f=c.charAt(g),Ic.registerController.isValidRegister(f)){var h=d[f]||new C;e+='"'+f+"    "+h.toString()+"<br>"}}else for(var f in d){var i=d[f].toString();i.length&&(e+='"'+f+"    "+i+"<br>")}Fb(a,e)},sort:function(a,b){function c(){if(b.argString){var a=new pc.StringStream(b.argString);if(a.eat("!")&&(e=!0),a.eol())return;if(!a.eatSpace())return"Invalid arguments";var c=a.match(/[a-z]+/);if(c){c=c[0],f=-1!=c.indexOf("i"),g=-1!=c.indexOf("u");var d=-1!=c.indexOf("d")&&1,i=-1!=c.indexOf("x")&&1,j=-1!=c.indexOf("o")&&1;if(d+i+j>1)return"Invalid arguments";h=d&&"decimal"||i&&"hex"||j&&"octal"}a.eatSpace()&&a.match(/\/.*\//)}}function d(a,b){if(e){var c;c=a,a=b,b=c}f&&(a=a.toLowerCase(),b=b.toLowerCase());var d=h&&o.exec(a),g=h&&o.exec(b);return d?(d=parseInt((d[1]+d[2]).toLowerCase(),p),g=parseInt((g[1]+g[2]).toLowerCase(),p),d-g):b>a?-1:1}var e,f,g,h,i=c();if(i)return void Fb(a,i+": "+b.argString);var j=b.line||a.firstLine(),k=b.lineEnd||b.line||a.lastLine();if(j!=k){var l=sc(j,0),m=sc(k,U(a,k)),n=a.getRange(l,m).split("\n"),o="decimal"==h?/(-?)([\d]+)/:"hex"==h?/(-?)(?:0x)?([0-9a-f]+)/i:"octal"==h?/([0-7]+)/:null,p="decimal"==h?10:"hex"==h?16:"octal"==h?8:null,q=[],r=[];if(h)for(var s=0;s<n.length;s++)o.exec(n[s])?q.push(n[s]):r.push(n[s]);else r=n;if(q.sort(d),r.sort(d),n=e?q.concat(r):r.concat(q),g){var t,u=n;n=[];for(var s=0;s<u.length;s++)u[s]!=t&&n.push(u[s]),t=u[s]}a.replaceRange(n.join("\n"),l,m)}},global:function(a,b){var c=b.argString;if(!c)return void Fb(a,"Regular Expression missing from global");var d,e=void 0!==b.line?b.line:a.firstLine(),f=b.lineEnd||b.line||a.lastLine(),g=zb(c),h=c;if(g.length&&(h=g[0],d=g.slice(1,g.length).join("/")),h)try{Jb(a,h,!0,!0)}catch(i){return void Fb(a,"Invalid regex: "+h)}for(var j=xb(a).getQuery(),k=[],l="",m=e;f>=m;m++){var n=j.test(a.getLine(m));n&&(k.push(m+1),l+=a.getLine(m)+"<br>")}if(!d)return void Fb(a,l);var o=0,p=function(){if(o<k.length){var b=k[o]+d;Vc.processCommand(a,b,{callback:p})}o++};p()},substitute:function(a,b){if(!a.getSearchCursor)throw new Error("Search feature not available. Requires searchcursor.js or any other getSearchCursor implementation.");var c,d,e,f,g=b.argString,h=g?zb(g):[],i="",j=!1,k=!1;if(h.length)c=h[0],i=h[1],void 0!==i&&(i=w("pcre")?Db(i):Cb(i),Ic.lastSubstituteReplacePart=i),d=h[2]?h[2].split(" "):[];else if(g&&g.length)return void Fb(a,"Substitutions should be of the form :s/pattern/replace/");if(d&&(e=d[0],f=parseInt(d[1]),e&&(-1!=e.indexOf("c")&&(j=!0,e.replace("c","")),-1!=e.indexOf("g")&&(k=!0,e.replace("g","")),c=c+"/"+e)),c)try{Jb(a,c,!0,!0)}catch(l){return void Fb(a,"Invalid regex: "+c)}if(i=i||Ic.lastSubstituteReplacePart,void 0===i)return void Fb(a,"No previous substitute regular expression");var m=xb(a),n=m.getQuery(),o=void 0!==b.line?b.line:a.getCursor().line,p=b.lineEnd||o;f&&(o=p,p=o+f-1);var q=G(a,sc(o,0)),r=a.getSearchCursor(n,q);Qb(a,j,k,o,p,r,n,i,b.callback)},redo:pc.commands.redo,undo:pc.commands.undo,write:function(a){pc.commands.save?pc.commands.save(a):a.save()},nohlsearch:function(a){Nb(a)},delmarks:function(a,b){if(!b.argString||!W(b.argString))return void Fb(a,"Argument required");for(var c=a.state.vim,d=new pc.StringStream(W(b.argString));!d.eol();){d.eatSpace();var e=d.pos;if(!d.match(/[a-zA-Z]/,!1))return void Fb(a,"Invalid argument: "+b.argString.substring(e));var f=d.next();if(d.match("-",!0)){if(!d.match(/[a-zA-Z]/,!1))return void Fb(a,"Invalid argument: "+b.argString.substring(e));var g=f,h=d.next();if(!(o(g)&&o(h)||r(g)&&r(h)))return void Fb(a,"Invalid argument: "+g+"-");var i=g.charCodeAt(0),j=h.charCodeAt(0);if(i>=j)return void Fb(a,"Invalid argument: "+b.argString.substring(e));for(var k=0;j-i>=k;k++){var l=String.fromCharCode(i+k);delete c.marks[l]}}else delete c.marks[f]}}},Vc=new Tc;pc.keyMap.vim={attach:k,detach:j},u("insertModeEscKeysTimeout",200,"number"),pc.keyMap["vim-insert"]={"Ctrl-N":"autocomplete","Ctrl-P":"autocomplete",Enter:function(a){var b=pc.commands.newlineAndIndentContinueComment||pc.commands.newlineAndIndent;b(a)},fallthrough:["default"],attach:k,detach:j},pc.keyMap["await-second"]={fallthrough:["vim-insert"],attach:k,detach:j},pc.keyMap["vim-replace"]={Backspace:"goCharLeft",fallthrough:["vim-insert"],attach:k,detach:j},z(),pc.Vim=wc(),wc=pc.Vim,uc={"return":"CR",backspace:"BS","delete":"Del",esc:"Esc",left:"Left",right:"Right",up:"Up",down:"Down",space:"Space",home:"Home",end:"End",pageup:"PageUp",pagedown:"PageDown",enter:"CR"};var Wc=wc.handleKey;wc.handleKey=function(a,b,c){return a.operation(function(){return Wc(a,b,c)},!0)},b.CodeMirror=pc;var Xc=wc.maybeInitVimState_;b.handler={$id:"ace/keyboard/vim",drawCursor:function(a,b,c,d,e){var f=this.state.vim||{},g=c.characterWidth,h=c.lineHeight,i=b.top,j=b.left;if(!f.insertMode){var k=d.cursor?fc.comparePoints(d.cursor,d.start)<=0:e.selection.isBackwards()||e.selection.isEmpty();!k&&j>g&&(j-=g)}!f.insertMode&&f.status&&(h/=2,i+=h),a.left=j+"px",a.top=i+"px",a.width=g+"px",a.height=h+"px"},handleKeyboard:function(a,b,c,d,f){var g=a.editor,h=g.state.cm,i=Xc(h);if(-1!=d){if("c"==c&&1==b)return!mc.isMac&&g.getCopyText()?(g.once("copy",function(){g.selection.clearSelection()}),{command:"null",passEvent:!0}):{command:coreCommands.stop};if(i.insertMode||mc.isMac&&this.handleMacRepeat(a,b,c)&&(b=-1,c=a.inputChar),-1==b||1&b||0===b&&c.length>1){var j=i.insertMode,k=e(b,c,f||{});null==i.status&&(i.status="");var l=dc(h,k,"user");if(i=Xc(h),l&&null!=i.status?i.status+=k:null==i.status&&(i.status=""),h._signal("changeStatus"),!l&&(-1!=b||j))return;return{command:"null",passEvent:!l}}}},attach:function(a){a.state||(a.state={});var b=new pc(a);a.state.cm=b,a.$vimModeHandler=this,pc.keyMap.vim.attach(b),Xc(b).status=null,b.on("vim-command-done",function(){b.virtualSelectionMode()||(Xc(b).status=null,b.ace._signal("changeStatus"),b.ace.session.markUndoGroup())}),b.on("changeStatus",function(){b.ace.renderer.updateCursor(),b.ace._signal("changeStatus")}),b.on("vim-mode-change",function(){b.virtualSelectionMode()||(b.ace.renderer.setStyle("normal-mode",!Xc(b).insertMode),b._signal("changeStatus"))}),b.ace.renderer.setStyle("normal-mode",!Xc(b).insertMode),a.renderer.$cursorLayer.drawCursor=this.drawCursor.bind(b),this.updateMacCompositionHandlers(a,!0)},detach:function(a){var b=a.state.cm;pc.keyMap.vim.detach(b),b.destroy(),a.state.cm=null,a.$vimModeHandler=null,a.renderer.$cursorLayer.drawCursor=null,a.renderer.setStyle("normal-mode",!1),this.updateMacCompositionHandlers(a,!1)},getStatusText:function(a){var b=a.state.cm,c=Xc(b);if(c.insertMode)return"INSERT";var d="";return c.visualMode&&(d+="VISUAL",c.visualLine&&(d+=" LINE"),c.visualBlock&&(d+=" BLOCK")),c.status&&(d+=(d?" ":"")+c.status),d},handleMacRepeat:function(a,b,c){if(-1==b)a.inputChar=c,a.lastEvent="input";else if(a.inputChar&&a.$lastHash==b&&a.$lastKey==c){if("input"==a.lastEvent)a.lastEvent="input1";else if("input1"==a.lastEvent)return!0}else a.$lastHash=b,a.$lastKey=c,a.lastEvent="keypress"},updateMacCompositionHandlers:function(a,b){var c=function(b){var c=a.state.cm,d=Xc(c);if(d.insertMode)this.onCompositionUpdateOrig(b);else{var e=this.textInput.getElement();e.blur(),e.focus(),e.value=b}},d=function(b){var c=a.state.cm,d=Xc(c);d.insertMode||this.onCompositionStartOrig(b)};b?a.onCompositionUpdateOrig||(a.onCompositionUpdateOrig=a.onCompositionUpdate,a.onCompositionUpdate=c,a.onCompositionStartOrig=a.onCompositionStart,a.onCompositionStart=d):a.onCompositionUpdateOrig&&(a.onCompositionUpdate=a.onCompositionUpdateOrig,a.onCompositionUpdateOrig=null,a.onCompositionStart=a.onCompositionStartOrig,a.onCompositionStartOrig=null)}};wc.defineOption({name:"wrap",set:function(a,b){b&&b.ace.setOption("wrap",a)},type:"boolean"},!1),rc.push({keys:"zc",type:"action",action:"fold",actionArgs:{open:!1}},{keys:"zC",type:"action",action:"fold",actionArgs:{open:!1,all:!0}},{keys:"zo",type:"action",action:"fold",actionArgs:{open:!0}},{keys:"zO",type:"action",action:"fold",actionArgs:{open:!0,all:!0}},{keys:"za",type:"action",action:"fold",actionArgs:{toggle:!0}},{keys:"zA",type:"action",action:"fold",actionArgs:{toggle:!0,all:!0}},{keys:"zf",type:"action",action:"fold",actionArgs:{open:!0,all:!0}},{keys:"zd",type:"action",action:"fold",actionArgs:{open:!0,all:!0}},{keys:"<C-A-j>",type:"action",action:"aceCommand",actionArgs:{name:"addCursorAbove"}},{keys:"<C-A-k>",type:"action",action:"aceCommand",actionArgs:{name:"addCursorBelow"}},{keys:"<C-A-S-j>",type:"action",action:"aceCommand",actionArgs:{name:"addCursorAboveSkipCurrent"}},{keys:"<C-A-S-k>",type:"action",action:"aceCommand",actionArgs:{name:"addCursorBelowSkipCurrent"}},{keys:"<C-A-h>",type:"action",action:"aceCommand",actionArgs:{name:"selectMoreBefore"}},{keys:"<C-A-l>",type:"action",action:"aceCommand",actionArgs:{name:"selectMoreAfter"}},{keys:"<C-A-S-h>",type:"action",action:"aceCommand",actionArgs:{name:"selectNextBefore"}},{keys:"<C-A-S-l>",type:"action",action:"aceCommand",actionArgs:{name:"selectNextAfter"}}),Oc.aceCommand=function(a,b){a.vimCmd=b,a.ace.inVirtualSelectionMode?a.ace.on("beforeEndOperation",ec):ec(null,a.ace)},Oc.fold=function(a,b){a.ace.execCommand(["toggleFoldWidget","toggleFoldWidget","foldOther","unfoldall"][(b.all?2:0)+(b.open?1:0)])},b.handler.defaultKeymap=rc,wc.map("Y","yy")});