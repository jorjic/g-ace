define("ace/mode/lua_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules"],function(a,b,c){"use strict";var d=a("../lib/oop"),e=a("./text_highlight_rules").TextHighlightRules,f=function(){var a="break|do|else|elseif|end|for|function|if|in|local|repeat|return|then|until|while|or|and|not",b="true|false|nil|_G|_VERSION",c="string|xpcall|package|tostring|print|os|unpack|require|getfenv|setmetatable|next|assert|tonumber|io|rawequal|collectgarbage|getmetatable|module|rawset|math|debug|pcall|table|newproxy|type|coroutine|_G|select|gcinfo|pairs|rawget|loadstring|ipairs|_VERSION|dofile|setfenv|load|error|loadfile|sub|upper|len|gfind|rep|find|match|char|dump|gmatch|reverse|byte|format|gsub|lower|preload|loadlib|loaded|loaders|cpath|config|path|seeall|exit|setlocale|date|getenv|difftime|remove|time|clock|tmpname|rename|execute|lines|write|close|flush|open|output|type|read|stderr|stdin|input|stdout|popen|tmpfile|log|max|acos|huge|ldexp|pi|cos|tanh|pow|deg|tan|cosh|sinh|random|randomseed|frexp|ceil|floor|rad|abs|sqrt|modf|asin|min|mod|fmod|log10|atan2|exp|sin|atan|getupvalue|debug|sethook|getmetatable|gethook|setmetatable|setlocal|traceback|setfenv|getinfo|setupvalue|getlocal|getregistry|getfenv|setn|insert|getn|foreachi|maxn|foreach|concat|sort|remove|resume|yield|status|wrap|create|running|__add|__sub|__mod|__unm|__concat|__lt|__index|__call|__gc|__metatable|__mul|__div|__pow|__len|__eq|__le|__newindex|__tostring|__mode|__tonumber",d="string|package|os|io|math|debug|table|coroutine",e="",f="setn|foreach|foreachi|gcinfo|log10|maxn",g=this.createKeywordMapper({keyword:a,"support.function":c,"invalid.deprecated":f,"constant.library":d,"constant.language":b,"invalid.illegal":e,"variable.language":"self"},"identifier"),h="(?:(?:[1-9]\\d*)|(?:0))",i="(?:0[xX][\\dA-Fa-f]+)",j="(?:"+h+"|"+i+")",k="(?:\\.\\d+)",l="(?:\\d+)",m="(?:(?:"+l+"?"+k+")|(?:"+l+"\\.))",n="(?:"+m+")";this.$rules={start:[{stateName:"bracketedComment",onMatch:function(a,b,c){return c.unshift(this.next,a.length-2,b),"comment"},regex:/\-\-\[=*\[/,next:[{onMatch:function(a,b,c){return a.length==c[1]?(c.shift(),c.shift(),this.next=c.shift()):this.next="","comment"},regex:/\]=*\]/,next:"start"},{defaultToken:"comment"}]},{token:"comment",regex:"\\-\\-.*$"},{stateName:"bracketedString",onMatch:function(a,b,c){return c.unshift(this.next,a.length,b),"string"},regex:/\[=*\[/,next:[{onMatch:function(a,b,c){return a.length==c[1]?(c.shift(),c.shift(),this.next=c.shift()):this.next="","string"},regex:/\]=*\]/,next:"start"},{defaultToken:"string"}]},{token:"string",regex:'"(?:[^\\\\]|\\\\.)*?"'},{token:"string",regex:"'(?:[^\\\\]|\\\\.)*?'"},{token:"constant.numeric",regex:n},{token:"constant.numeric",regex:j+"\\b"},{token:g,regex:"[a-zA-Z_$][a-zA-Z0-9_$]*\\b"},{token:"keyword.operator",regex:"\\+|\\-|\\*|\\/|%|\\#|\\^|~|<|>|<=|=>|==|~=|=|\\:|\\.\\.\\.|\\.\\."},{token:"paren.lparen",regex:"[\\[\\(\\{]"},{token:"paren.rparen",regex:"[\\]\\)\\}]"},{token:"text",regex:"\\s+|\\w+"}]},this.normalizeRules()};d.inherits(f,e),b.LuaHighlightRules=f}),define("ace/mode/folding/lua",["require","exports","module","ace/lib/oop","ace/mode/folding/fold_mode","ace/range","ace/token_iterator"],function(a,b,c){"use strict";var d=a("../../lib/oop"),e=a("./fold_mode").FoldMode,f=a("../../range").Range,g=a("../../token_iterator").TokenIterator,h=b.FoldMode=function(){};d.inherits(h,e),function(){this.foldingStartMarker=/\b(function|then|do|repeat)\b|{\s*$|(\[=*\[)/,this.foldingStopMarker=/\bend\b|^\s*}|\]=*\]/,this.getFoldWidget=function(a,b,c){var d=a.getLine(c),e=this.foldingStartMarker.test(d),f=this.foldingStopMarker.test(d);if(e&&!f){var g=d.match(this.foldingStartMarker);if("then"==g[1]&&/\belseif\b/.test(d))return;if(g[1]){if("keyword"===a.getTokenAt(c,g.index+1).type)return"start"}else{if(!g[2])return"start";var h=a.bgTokenizer.getState(c)||"";if("bracketedComment"==h[0]||"bracketedString"==h[0])return"start"}}if("markbeginend"!=b||!f||e&&f)return"";var g=d.match(this.foldingStopMarker);if("end"===g[0]){if("keyword"===a.getTokenAt(c,g.index+1).type)return"end"}else{if("]"!==g[0][0])return"end";var h=a.bgTokenizer.getState(c-1)||"";if("bracketedComment"==h[0]||"bracketedString"==h[0])return"end"}},this.getFoldWidgetRange=function(a,b,c){var d=a.doc.getLine(c),e=this.foldingStartMarker.exec(d);if(e)return e[1]?this.luaBlock(a,c,e.index+1):e[2]?a.getCommentFoldRange(c,e.index+1):this.openingBracketBlock(a,"{",c,e.index);var e=this.foldingStopMarker.exec(d);return e?"end"===e[0]&&"keyword"===a.getTokenAt(c,e.index+1).type?this.luaBlock(a,c,e.index+1):"]"===e[0][0]?a.getCommentFoldRange(c,e.index+1):this.closingBracketBlock(a,"}",c,e.index+e[0].length):void 0},this.luaBlock=function(a,b,c){var d=new g(a,b,c),e={"function":1,"do":1,then:1,elseif:-1,end:-1,repeat:1,until:-1},h=d.getCurrentToken();if(h&&"keyword"==h.type){var i=h.value,j=[i],k=e[i];if(k){var l=-1===k?d.getCurrentTokenColumn():a.getLine(b).length,m=b;for(d.step=-1===k?d.stepBackward:d.stepForward;h=d.step();)if("keyword"===h.type){var n=k*e[h.value];if(n>0)j.unshift(h.value);else if(0>=n){if(j.shift(),!j.length&&"elseif"!=h.value)break;0===n&&j.unshift(h.value)}}var b=d.getCurrentTokenRow();return-1===k?new f(b,a.getLine(b).length,m,l):new f(m,l,b,d.getCurrentTokenColumn())}}}}.call(h.prototype)}),define("ace/mode/behaviour/cstyle",["require","exports","module","ace/lib/oop","ace/mode/behaviour","ace/token_iterator","ace/lib/lang"],function(a,b,c){"use strict";var d,e=a("../../lib/oop"),f=a("../behaviour").Behaviour,g=a("../../token_iterator").TokenIterator,h=a("../../lib/lang"),i=["text","paren.rparen","punctuation.operator"],j=["text","paren.rparen","punctuation.operator","comment"],k={},l=function(a){var b=-1;return a.multiSelect&&(b=a.selection.index,k.rangeCount!=a.multiSelect.rangeCount&&(k={rangeCount:a.multiSelect.rangeCount})),k[b]?d=k[b]:void(d=k[b]={autoInsertedBrackets:0,autoInsertedRow:-1,autoInsertedLineEnd:"",maybeInsertedBrackets:0,maybeInsertedRow:-1,maybeInsertedLineStart:"",maybeInsertedLineEnd:""})},m=function(a,b,c,d){var e=a.end.row-a.start.row;return{text:c+b+d,selection:[0,a.start.column+1,e,a.end.column+(e?0:1)]}},n=function(){this.add("braces","insertion",function(a,b,c,e,f){var g=c.getCursorPosition(),i=e.doc.getLine(g.row);if("{"==f){l(c);var j=c.getSelectionRange(),k=e.doc.getTextRange(j);if(""!==k&&"{"!==k&&c.getWrapBehavioursEnabled())return m(j,k,"{","}");if(n.isSaneInsertion(c,e))return n.recordAutoInsert(c,e,"}"),{text:"{}",selection:[1,1]}}else if("}"==f){l(c);var o=i.substring(g.column,g.column+1);if("}"==o){var p=e.$findOpeningBracket("}",{column:g.column+1,row:g.row});if(null!==p&&n.isAutoInsertedClosing(g,i,f))return n.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}else{if("\n"==f||"\r\n"==f){l(c);var q="";n.isMaybeInsertedClosing(g,i)&&(q=h.stringRepeat("}",d.maybeInsertedBrackets),n.clearMaybeInsertedClosing());var o=i.substring(g.column,g.column+1);if("}"===o){var r=e.findMatchingBracket({row:g.row,column:g.column+1},"}");if(!r)return null;var s=this.$getIndent(e.getLine(r.row))}else{if(!q)return void n.clearMaybeInsertedClosing();var s=this.$getIndent(i)}var t=s+e.getTabString();return{text:"\n"+t+"\n"+s+q,selection:[1,t.length,1,t.length]}}n.clearMaybeInsertedClosing()}}),this.add("braces","deletion",function(a,b,c,e,f){var g=e.doc.getTextRange(f);if(!f.isMultiLine()&&"{"==g){l(c);var h=e.doc.getLine(f.start.row),i=h.substring(f.end.column,f.end.column+1);if("}"==i)return f.end.column++,f;d.maybeInsertedBrackets--}}),this.add("parens","insertion",function(a,b,c,d,e){if("("==e){l(c);var f=c.getSelectionRange(),g=d.doc.getTextRange(f);if(""!==g&&c.getWrapBehavioursEnabled())return m(f,g,"(",")");if(n.isSaneInsertion(c,d))return n.recordAutoInsert(c,d,")"),{text:"()",selection:[1,1]}}else if(")"==e){l(c);var h=c.getCursorPosition(),i=d.doc.getLine(h.row),j=i.substring(h.column,h.column+1);if(")"==j){var k=d.$findOpeningBracket(")",{column:h.column+1,row:h.row});if(null!==k&&n.isAutoInsertedClosing(h,i,e))return n.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}}),this.add("parens","deletion",function(a,b,c,d,e){var f=d.doc.getTextRange(e);if(!e.isMultiLine()&&"("==f){l(c);var g=d.doc.getLine(e.start.row),h=g.substring(e.start.column+1,e.start.column+2);if(")"==h)return e.end.column++,e}}),this.add("brackets","insertion",function(a,b,c,d,e){if("["==e){l(c);var f=c.getSelectionRange(),g=d.doc.getTextRange(f);if(""!==g&&c.getWrapBehavioursEnabled())return m(f,g,"[","]");if(n.isSaneInsertion(c,d))return n.recordAutoInsert(c,d,"]"),{text:"[]",selection:[1,1]}}else if("]"==e){l(c);var h=c.getCursorPosition(),i=d.doc.getLine(h.row),j=i.substring(h.column,h.column+1);if("]"==j){var k=d.$findOpeningBracket("]",{column:h.column+1,row:h.row});if(null!==k&&n.isAutoInsertedClosing(h,i,e))return n.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}}),this.add("brackets","deletion",function(a,b,c,d,e){var f=d.doc.getTextRange(e);if(!e.isMultiLine()&&"["==f){l(c);var g=d.doc.getLine(e.start.row),h=g.substring(e.start.column+1,e.start.column+2);if("]"==h)return e.end.column++,e}}),this.add("string_dquotes","insertion",function(a,b,c,d,e){if('"'==e||"'"==e){l(c);var f=e,g=c.getSelectionRange(),h=d.doc.getTextRange(g);if(""!==h&&"'"!==h&&'"'!=h&&c.getWrapBehavioursEnabled())return m(g,h,f,f);if(!h){var i=c.getCursorPosition(),j=d.doc.getLine(i.row),k=j.substring(i.column-1,i.column),n=j.substring(i.column,i.column+1),o=d.getTokenAt(i.row,i.column),p=d.getTokenAt(i.row,i.column+1);if("\\"==k&&o&&/escape/.test(o.type))return null;var q,r=o&&/string/.test(o.type),s=!p||/string/.test(p.type);if(n==f)q=r!==s;else{if(r&&!s)return null;if(r&&s)return null;var t=d.$mode.tokenRe;t.lastIndex=0;var u=t.test(k);t.lastIndex=0;var v=t.test(k);if(u||v)return null;if(n&&!/[\s;,.})\]\\]/.test(n))return null;q=!0}return{text:q?f+f:"",selection:[1,1]}}}}),this.add("string_dquotes","deletion",function(a,b,c,d,e){var f=d.doc.getTextRange(e);if(!e.isMultiLine()&&('"'==f||"'"==f)){l(c);var g=d.doc.getLine(e.start.row),h=g.substring(e.start.column+1,e.start.column+2);if(h==f)return e.end.column++,e}})};n.isSaneInsertion=function(a,b){var c=a.getCursorPosition(),d=new g(b,c.row,c.column);if(!this.$matchTokenType(d.getCurrentToken()||"text",i)){var e=new g(b,c.row,c.column+1);if(!this.$matchTokenType(e.getCurrentToken()||"text",i))return!1}return d.stepForward(),d.getCurrentTokenRow()!==c.row||this.$matchTokenType(d.getCurrentToken()||"text",j)},n.$matchTokenType=function(a,b){return b.indexOf(a.type||a)>-1},n.recordAutoInsert=function(a,b,c){var e=a.getCursorPosition(),f=b.doc.getLine(e.row);this.isAutoInsertedClosing(e,f,d.autoInsertedLineEnd[0])||(d.autoInsertedBrackets=0),d.autoInsertedRow=e.row,d.autoInsertedLineEnd=c+f.substr(e.column),d.autoInsertedBrackets++},n.recordMaybeInsert=function(a,b,c){var e=a.getCursorPosition(),f=b.doc.getLine(e.row);this.isMaybeInsertedClosing(e,f)||(d.maybeInsertedBrackets=0),d.maybeInsertedRow=e.row,d.maybeInsertedLineStart=f.substr(0,e.column)+c,d.maybeInsertedLineEnd=f.substr(e.column),d.maybeInsertedBrackets++},n.isAutoInsertedClosing=function(a,b,c){return d.autoInsertedBrackets>0&&a.row===d.autoInsertedRow&&c===d.autoInsertedLineEnd[0]&&b.substr(a.column)===d.autoInsertedLineEnd},n.isMaybeInsertedClosing=function(a,b){return d.maybeInsertedBrackets>0&&a.row===d.maybeInsertedRow&&b.substr(a.column)===d.maybeInsertedLineEnd&&b.substr(0,a.column)==d.maybeInsertedLineStart},n.popAutoInsertedClosing=function(){d.autoInsertedLineEnd=d.autoInsertedLineEnd.substr(1),d.autoInsertedBrackets--},n.clearMaybeInsertedClosing=function(){d&&(d.maybeInsertedBrackets=0,d.maybeInsertedRow=-1)},e.inherits(n,f),b.CstyleBehaviour=n}),define("ace/mode/behaviour/lua",["require","exports","module","ace/lib/oop","ace/mode/behaviour","ace/mode/behaviour/cstyle","ace/token_iterator","ace/lib/lang"],function(a,b,c){"use strict";var d=a("../../lib/oop"),e=a("../behaviour").Behaviour,f=a("../../token_iterator").TokenIterator,g=(a("../../lib/lang"),a("./cstyle").CstyleBehaviour),h=function(){this.inherit(g,["braces","parens","string_dquotes"]),this.add("closekeyword","insertion",function(a,b,c,d,e){if("\n"==e){var g=c.getCursorPosition(),h=d.getLine(g.row),i=this.$getIndent(h),j=d.getLength()<=g.row-1?"":d.getLine(g.row+1),k=this.$getIndent(j);if(!(k>i)){var l=new f(d,g.row,g.column),m=l.getCurrentToken();if(m&&"keyword"==m.type&&("then"==m.value||"do"==m.value)){var n=l.stepForward();if(n&&("end"==n.value||"else"==n.value||"elseif"==n.value)&&k==i)return;l.stepBackward();do m=l.stepBackward();while("keyword"!=m.type);if("elseif"==m.value||"else"==m.value)return;var o=i+d.getTabString();return{text:"\n"+o+"\n"+i+"end",selection:[1,o.length,1,o.length]}}}}}),this.add("closekeyword","deletion",function(a,b,c,d,e){d.doc.getTextRange(e);if(!(e.isMultiLine()||Math.abs(e.end.column-e.start.column)>1)){var g=c.getCursorPosition(),h=new f(d,g.row,g.column),i=h.getCurrentToken();if(i&&"keyword"==i.type&&("then"==i.value||"do"==i.value)){e.start.column=h.getCurrentTokenColumn();do i=h.stepForward();while(i&&"text"==i.type);if(i&&"end"==i.value)return e.end.row=h.getCurrentTokenRow(),e.end.column=h.getCurrentTokenColumn()+3,e}}}),this.add("closefunction","insertion",function(a,b,c,d,e){if("\n"==e){var g=c.getCursorPosition(),h=d.getLine(g.row),i=this.$getIndent(h),j=d.getLength()<=g.row-1?"":d.getLine(g.row+1),k=this.$getIndent(j);if(!(k>i)){var l=new f(d,g.row,g.column),m=l.stepForward();if(!m||"end"!=m.value&&"else"!=m.value&&"elseif"!=m.value||k!=i){l.stepBackward();var n=l.getCurrentToken();if(n&&"paren.rparen"==n.type){for(;"paren.lparen"!=n.type;){if(n=l.stepBackward(),!n)return;if("keyword"==n.type)return}if(n=l.stepBackward()){for(;"text"==n.type&&(" "==n.value||"."==n.value)||"keyword.operator"==n.type||"identifier"==n.type;)if(n=l.stepBackward(),!n)return;if(n&&"keyword"==n.type&&"function"==n.value){var o=i+d.getTabString();return{text:"\n"+o+"\n"+i+"end",selection:[1,o.length,1,o.length]}}}}}}}}),this.add("smartbackspace","deletion",function(a,b,c,d,e){var f=d.doc.getTextRange(e);if(!e.isMultiLine()&&/\s/.test(f)){var g=d.doc.getLine(e.start.row),h=g.substring(0,e.start.column+1);if(/^\s+$/.test(h)&&e.start.row>0)return e.start.row--,e.start.column=d.doc.getLine(e.start.row).length,e}})};d.inherits(h,e),b.LuaBehaviour=h}),define("ace/mode/lua",["require","exports","module","ace/lib/oop","ace/mode/text","ace/mode/lua_highlight_rules","ace/mode/folding/lua","ace/range","ace/worker/worker_client","ace/mode/behaviour/luastyle"],function(a,b,c){"use strict";var d=a("../lib/oop"),e=a("./text").Mode,f=a("./lua_highlight_rules").LuaHighlightRules,g=a("./folding/lua").FoldMode,h=a("../range").Range,i=a("../worker/worker_client").WorkerClient,j=a("./behaviour/lua").LuaBehaviour,k=function(){this.HighlightRules=f,this.$behaviour=new j,this.foldingRules=new g};d.inherits(k,e),function(){function a(a){for(var c=0,d=0;d<a.length;d++){var e=a[d];"keyword"==e.type?e.value in b&&(c+=b[e.value]):"paren.lparen"==e.type?c+=e.value.length:"paren.rparen"==e.type&&(c-=e.value.length)}return 0>c?-1:c>0?1:0}this.lineCommentStart="--",this.blockComment={start:"--[",end:"]--"};var b={"function":1,then:1,"do":1,"else":1,elseif:1,repeat:1,end:-1,until:-1},c=["else","elseif","end","until"];this.getNextLineIndent=function(b,c,d){var e=this.$getIndent(c),f=0,g=this.getTokenizer().getLineTokens(c,b),h=g.tokens;return"start"==b&&(f=a(h)),f>0?e+d:0>f&&e.substr(e.length-d.length)==d&&!this.checkOutdent(b,c,"\n")?e.substr(0,e.length-d.length):e},this.checkOutdent=function(a,b,d){if("\n"!=d&&"\r"!=d&&"\r\n"!=d)return!1;if(b.match(/^\s*[\)\}\]]$/))return!0;var e=this.getTokenizer().getLineTokens(b.trim(),a).tokens;return e&&e.length?"keyword"==e[0].type&&-1!=c.indexOf(e[0].value):!1},this.autoOutdent=function(b,c,d){var e=c.getLine(d-1),f=this.$getIndent(e).length,g=this.getTokenizer().getLineTokens(e,"start").tokens,i=c.getTabString().length,j=f+i*a(g),k=this.$getIndent(c.getLine(d)).length;j>k||c.outdentRows(new h(d,0,d+2,0))},this.createWorker=function(a){var b=new i(["ace"],"ace/mode/lua_worker","Worker");return b.attachToDocument(a.getDocument()),b.on("error",function(b){a.setAnnotations([b.data])}),b.on("ok",function(b){a.clearAnnotations()}),b},this.$id="ace/mode/lua"}.call(k.prototype),b.Mode=k});
//# sourceMappingURL=mode-lua.js.map